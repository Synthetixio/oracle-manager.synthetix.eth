{"version":3,"file":"chunk/6726.de51fa65.js","mappings":"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","sources":["webpack://@snx-v3/oracle-manager/../../node_modules/@walletconnect/utils/dist/esm/constants.js","webpack://@snx-v3/oracle-manager/../../node_modules/@walletconnect/encoding/dist/esm/index.js","webpack://@snx-v3/oracle-manager/../../node_modules/@walletconnect/utils/dist/esm/encoding.js","webpack://@snx-v3/oracle-manager/../../node_modules/@walletconnect/utils/dist/esm/misc.js","webpack://@snx-v3/oracle-manager/../../node_modules/@walletconnect/utils/dist/esm/validators.js","webpack://@snx-v3/oracle-manager/../../node_modules/@walletconnect/utils/dist/esm/ethereum.js","webpack://@snx-v3/oracle-manager/../../node_modules/@walletconnect/utils/dist/esm/url.js","webpack://@snx-v3/oracle-manager/../../node_modules/@walletconnect/socket-transport/dist/esm/network.js","webpack://@snx-v3/oracle-manager/../../node_modules/@walletconnect/socket-transport/dist/esm/index.js","webpack://@snx-v3/oracle-manager/../../node_modules/@walletconnect/core/dist/esm/errors.js","webpack://@snx-v3/oracle-manager/../../node_modules/@walletconnect/core/dist/esm/events.js","webpack://@snx-v3/oracle-manager/../../node_modules/@walletconnect/core/dist/esm/storage.js","webpack://@snx-v3/oracle-manager/../../node_modules/@walletconnect/utils/dist/esm/session.js","webpack://@snx-v3/oracle-manager/../../node_modules/@walletconnect/core/dist/esm/url.js","webpack://@snx-v3/oracle-manager/../../node_modules/@walletconnect/core/dist/esm/index.js","webpack://@snx-v3/oracle-manager/../../node_modules/@walletconnect/utils/dist/esm/payload.js","webpack://@snx-v3/oracle-manager/../../node_modules/@walletconnect/crypto/dist/esm/constants/length.js","webpack://@snx-v3/oracle-manager/../../node_modules/@walletconnect/crypto/dist/esm/constants/default.js","webpack://@snx-v3/oracle-manager/../../node_modules/@walletconnect/crypto/dist/esm/constants/operations.js","webpack://@snx-v3/oracle-manager/../../node_modules/@walletconnect/crypto/dist/esm/lib/browser.js","webpack://@snx-v3/oracle-manager/../../node_modules/@walletconnect/crypto/dist/esm/browser/aes.js","webpack://@snx-v3/oracle-manager/../../node_modules/@walletconnect/crypto/dist/esm/browser/hmac.js","webpack://@snx-v3/oracle-manager/../../node_modules/@walletconnect/iso-crypto/dist/esm/index.js","webpack://@snx-v3/oracle-manager/../../node_modules/@walletconnect/randombytes/dist/esm/browser/index.js","webpack://@snx-v3/oracle-manager/../../node_modules/@walletconnect/client/dist/esm/index.js","webpack://@snx-v3/oracle-manager/../../node_modules/@walletconnect/socket-transport/node_modules/ws/browser.js","webpack://@snx-v3/oracle-manager/../../node_modules/buffer/index.js","webpack://@snx-v3/oracle-manager/../../node_modules/is-typedarray/index.js","webpack://@snx-v3/oracle-manager/../../node_modules/query-string/index.js","webpack://@snx-v3/oracle-manager/../../node_modules/typedarray-to-buffer/index.js"],"sourcesContent":["export const reservedEvents = [\n    \"session_request\",\n    \"session_update\",\n    \"exchange_key\",\n    \"connect\",\n    \"disconnect\",\n    \"display_uri\",\n    \"modal_closed\",\n    \"transport_open\",\n    \"transport_close\",\n    \"transport_error\",\n];\nexport const signingMethods = [\n    \"eth_sendTransaction\",\n    \"eth_signTransaction\",\n    \"eth_sign\",\n    \"eth_signTypedData\",\n    \"eth_signTypedData_v1\",\n    \"eth_signTypedData_v2\",\n    \"eth_signTypedData_v3\",\n    \"eth_signTypedData_v4\",\n    \"personal_sign\",\n    \"wallet_addEthereumChain\",\n    \"wallet_switchEthereumChain\",\n    \"wallet_getPermissions\",\n    \"wallet_requestPermissions\",\n    \"wallet_registerOnboarding\",\n    \"wallet_watchAsset\",\n    \"wallet_scanQRCode\",\n];\nexport const stateMethods = [\"eth_accounts\", \"eth_chainId\", \"net_version\"];\nexport const infuraNetworks = {\n    1: \"mainnet\",\n    3: \"ropsten\",\n    4: \"rinkeby\",\n    5: \"goerli\",\n    42: \"kovan\",\n};\n//# sourceMappingURL=constants.js.map","import _isTypedArray from \"is-typedarray\";\nimport typedArrayToBuffer from \"typedarray-to-buffer\";\nconst ENC_HEX = \"hex\";\nconst ENC_UTF8 = \"utf8\";\nconst ENC_BIN = \"binary\";\nconst TYPE_BUFFER = \"buffer\";\nconst TYPE_ARRAY = \"array\";\nconst TYPE_TYPED_ARRAY = \"typed-array\";\nconst TYPE_ARRAY_BUFFER = \"array-buffer\";\nconst STRING_ZERO = \"0\";\nexport function bufferToArray(buf) {\n    return new Uint8Array(buf);\n}\nexport function bufferToHex(buf, prefixed = false) {\n    const hex = buf.toString(ENC_HEX);\n    return prefixed ? addHexPrefix(hex) : hex;\n}\nexport function bufferToUtf8(buf) {\n    return buf.toString(ENC_UTF8);\n}\nexport function bufferToNumber(buf) {\n    return buf.readUIntBE(0, buf.length);\n}\nexport function bufferToBinary(buf) {\n    return arrayToBinary(bufferToArray(buf));\n}\nexport function arrayToBuffer(arr) {\n    return typedArrayToBuffer(arr);\n}\nexport function arrayToHex(arr, prefixed = false) {\n    return bufferToHex(arrayToBuffer(arr), prefixed);\n}\nexport function arrayToUtf8(arr) {\n    return bufferToUtf8(arrayToBuffer(arr));\n}\nexport function arrayToNumber(arr) {\n    return bufferToNumber(arrayToBuffer(arr));\n}\nexport function arrayToBinary(arr) {\n    return Array.from(arr)\n        .map(numberToBinary)\n        .join(\"\");\n}\nexport function hexToBuffer(hex) {\n    return Buffer.from(removeHexPrefix(hex), ENC_HEX);\n}\nexport function hexToArray(hex) {\n    return bufferToArray(hexToBuffer(hex));\n}\nexport function hexToUtf8(hex) {\n    return bufferToUtf8(hexToBuffer(hex));\n}\nexport function hexToNumber(hex) {\n    return arrayToNumber(hexToArray(hex));\n}\nexport function hexToBinary(hex) {\n    return arrayToBinary(hexToArray(hex));\n}\nexport function utf8ToBuffer(utf8) {\n    return Buffer.from(utf8, ENC_UTF8);\n}\nexport function utf8ToArray(utf8) {\n    return bufferToArray(utf8ToBuffer(utf8));\n}\nexport function utf8ToHex(utf8, prefixed = false) {\n    return bufferToHex(utf8ToBuffer(utf8), prefixed);\n}\nexport function utf8ToNumber(utf8) {\n    const num = parseInt(utf8, 10);\n    assert(isDefined(num), \"Number can only safely store up to 53 bits\");\n    return num;\n}\nexport function utf8ToBinary(utf8) {\n    return arrayToBinary(utf8ToArray(utf8));\n}\nexport function numberToBuffer(num) {\n    return binaryToBuffer(numberToBinary(num));\n}\nexport function numberToArray(num) {\n    return binaryToArray(numberToBinary(num));\n}\nexport function numberToHex(num, prefixed) {\n    return binaryToHex(numberToBinary(num), prefixed);\n}\nexport function numberToUtf8(num) {\n    return `${num}`;\n}\nexport function numberToBinary(num) {\n    const bin = (num >>> 0).toString(2);\n    return sanitizeBytes(bin);\n}\nexport function binaryToBuffer(bin) {\n    return arrayToBuffer(binaryToArray(bin));\n}\nexport function binaryToArray(bin) {\n    return new Uint8Array(splitBytes(bin).map(x => parseInt(x, 2)));\n}\nexport function binaryToHex(bin, prefixed) {\n    return arrayToHex(binaryToArray(bin), prefixed);\n}\nexport function binaryToUtf8(bin) {\n    return arrayToUtf8(binaryToArray(bin));\n}\nexport function binaryToNumber(bin) {\n    return arrayToNumber(binaryToArray(bin));\n}\nexport function isBinaryString(str) {\n    if (typeof str !== \"string\" || !new RegExp(/^[01]+$/).test(str)) {\n        return false;\n    }\n    if (str.length % 8 !== 0) {\n        return false;\n    }\n    return true;\n}\nexport function isHexString(str, length) {\n    if (typeof str !== \"string\" || !str.match(/^0x[0-9A-Fa-f]*$/)) {\n        return false;\n    }\n    if (length && str.length !== 2 + 2 * length) {\n        return false;\n    }\n    return true;\n}\nexport function isBuffer(val) {\n    return Buffer.isBuffer(val);\n}\nexport function isTypedArray(val) {\n    return _isTypedArray.strict(val) && !isBuffer(val);\n}\nexport function isArrayBuffer(val) {\n    return (!isTypedArray(val) &&\n        !isBuffer(val) &&\n        typeof val.byteLength !== \"undefined\");\n}\nexport function getType(val) {\n    if (isBuffer(val)) {\n        return TYPE_BUFFER;\n    }\n    else if (isTypedArray(val)) {\n        return TYPE_TYPED_ARRAY;\n    }\n    else if (isArrayBuffer(val)) {\n        return TYPE_ARRAY_BUFFER;\n    }\n    else if (Array.isArray(val)) {\n        return TYPE_ARRAY;\n    }\n    else {\n        return typeof val;\n    }\n}\nexport function getEncoding(str) {\n    if (isBinaryString(str)) {\n        return ENC_BIN;\n    }\n    if (isHexString(str)) {\n        return ENC_HEX;\n    }\n    return ENC_UTF8;\n}\nexport function concatBuffers(...args) {\n    const result = Buffer.concat(args);\n    return result;\n}\nexport function concatArrays(...args) {\n    let result = [];\n    args.forEach(arg => (result = result.concat(Array.from(arg))));\n    return new Uint8Array([...result]);\n}\nexport function trimLeft(data, length) {\n    const diff = data.length - length;\n    if (diff > 0) {\n        data = data.slice(diff);\n    }\n    return data;\n}\nexport function trimRight(data, length) {\n    return data.slice(0, length);\n}\nexport function calcByteLength(length, byteSize = 8) {\n    const remainder = length % byteSize;\n    return remainder\n        ? ((length - remainder) / byteSize) * byteSize + byteSize\n        : length;\n}\nexport function splitBytes(str, byteSize = 8) {\n    const bytes = sanitizeBytes(str).match(new RegExp(`.{${byteSize}}`, \"gi\"));\n    return Array.from(bytes || []);\n}\nexport function swapBytes(str) {\n    return splitBytes(str)\n        .map(reverseString)\n        .join(\"\");\n}\nexport function swapHex(str) {\n    return binaryToHex(swapBytes(hexToBinary(str)));\n}\nexport function sanitizeBytes(str, byteSize = 8, padding = STRING_ZERO) {\n    return padLeft(str, calcByteLength(str.length, byteSize), padding);\n}\nexport function padLeft(str, length, padding = STRING_ZERO) {\n    return padString(str, length, true, padding);\n}\nexport function padRight(str, length, padding = STRING_ZERO) {\n    return padString(str, length, false, padding);\n}\nexport function removeHexPrefix(hex) {\n    return hex.replace(/^0x/, \"\");\n}\nexport function addHexPrefix(hex) {\n    return hex.startsWith(\"0x\") ? hex : `0x${hex}`;\n}\nexport function sanitizeHex(hex) {\n    hex = removeHexPrefix(hex);\n    hex = sanitizeBytes(hex, 2);\n    if (hex) {\n        hex = addHexPrefix(hex);\n    }\n    return hex;\n}\nexport function removeHexLeadingZeros(hex) {\n    const prefixed = hex.startsWith(\"0x\");\n    hex = removeHexPrefix(hex);\n    hex = hex.startsWith(STRING_ZERO) ? hex.substring(1) : hex;\n    return prefixed ? addHexPrefix(hex) : hex;\n}\nfunction isUndefined(value) {\n    return typeof value === \"undefined\";\n}\nfunction isDefined(value) {\n    return !isUndefined(value);\n}\nfunction assert(assertion, errorMessage) {\n    if (!assertion) {\n        throw new Error(errorMessage);\n    }\n}\nfunction reverseString(str) {\n    return str\n        .split(\"\")\n        .reverse()\n        .join(\"\");\n}\nfunction padString(str, length, left, padding = STRING_ZERO) {\n    const diff = length - str.length;\n    let result = str;\n    if (diff > 0) {\n        const pad = padding.repeat(diff);\n        result = left ? pad + str : str + pad;\n    }\n    return result;\n}\n//# sourceMappingURL=index.js.map","import BN from \"bn.js\";\nimport * as encoding from \"@walletconnect/encoding\";\nexport function convertArrayBufferToBuffer(arrBuf) {\n    return encoding.arrayToBuffer(new Uint8Array(arrBuf));\n}\nexport function convertArrayBufferToUtf8(arrBuf) {\n    return encoding.arrayToUtf8(new Uint8Array(arrBuf));\n}\nexport function convertArrayBufferToHex(arrBuf, noPrefix) {\n    return encoding.arrayToHex(new Uint8Array(arrBuf), !noPrefix);\n}\nexport function convertArrayBufferToNumber(arrBuf) {\n    return encoding.arrayToNumber(new Uint8Array(arrBuf));\n}\nexport function concatArrayBuffers(...args) {\n    return encoding.hexToArray(args.map(b => encoding.arrayToHex(new Uint8Array(b))).join(\"\")).buffer;\n}\nexport function convertBufferToArrayBuffer(buf) {\n    return encoding.bufferToArray(buf).buffer;\n}\nexport function convertBufferToUtf8(buf) {\n    return encoding.bufferToUtf8(buf);\n}\nexport function convertBufferToHex(buf, noPrefix) {\n    return encoding.bufferToHex(buf, !noPrefix);\n}\nexport function convertBufferToNumber(buf) {\n    return encoding.bufferToNumber(buf);\n}\nexport function concatBuffers(...args) {\n    return encoding.concatBuffers(...args);\n}\nexport function convertUtf8ToArrayBuffer(utf8) {\n    return encoding.utf8ToArray(utf8).buffer;\n}\nexport function convertUtf8ToBuffer(utf8) {\n    return encoding.utf8ToBuffer(utf8);\n}\nexport function convertUtf8ToHex(utf8, noPrefix) {\n    return encoding.utf8ToHex(utf8, !noPrefix);\n}\nexport function convertUtf8ToNumber(utf8) {\n    return new BN(utf8, 10).toNumber();\n}\nexport function convertHexToBuffer(hex) {\n    return encoding.hexToBuffer(hex);\n}\nexport function convertHexToArrayBuffer(hex) {\n    return encoding.hexToArray(hex).buffer;\n}\nexport function convertHexToUtf8(hex) {\n    return encoding.hexToUtf8(hex);\n}\nexport function convertHexToNumber(hex) {\n    return new BN(encoding.removeHexPrefix(hex), \"hex\").toNumber();\n}\nexport function convertNumberToBuffer(num) {\n    return encoding.numberToBuffer(num);\n}\nexport function convertNumberToArrayBuffer(num) {\n    return encoding.numberToArray(num).buffer;\n}\nexport function convertNumberToUtf8(num) {\n    return new BN(num).toString();\n}\nexport function convertNumberToHex(num, noPrefix) {\n    const hex = encoding.removeHexPrefix(encoding.sanitizeHex(new BN(num).toString(16)));\n    return noPrefix ? hex : encoding.addHexPrefix(hex);\n}\n//# sourceMappingURL=encoding.js.map","import * as encoding from \"@walletconnect/encoding\";\nimport * as jsonRpcUtils from \"@walletconnect/jsonrpc-utils\";\nimport { infuraNetworks } from \"./constants\";\nexport function sanitizeHex(hex) {\n    return encoding.sanitizeHex(hex);\n}\nexport function addHexPrefix(hex) {\n    return encoding.addHexPrefix(hex);\n}\nexport function removeHexPrefix(hex) {\n    return encoding.removeHexPrefix(hex);\n}\nexport function removeHexLeadingZeros(hex) {\n    return encoding.removeHexLeadingZeros(encoding.addHexPrefix(hex));\n}\nexport const payloadId = jsonRpcUtils.payloadId;\nexport function uuid() {\n    const result = ((a, b) => {\n        for (b = a = \"\"; a++ < 36; b += (a * 51) & 52 ? (a ^ 15 ? 8 ^ (Math.random() * (a ^ 20 ? 16 : 4)) : 4).toString(16) : \"-\") {\n        }\n        return b;\n    })();\n    return result;\n}\nexport function logDeprecationWarning() {\n    console.warn(\"DEPRECATION WARNING: This WalletConnect client library will be deprecated in favor of @walletconnect/client. Please check docs.walletconnect.org to learn more about this migration!\");\n}\nexport function getInfuraRpcUrl(chainId, infuraId) {\n    let rpcUrl;\n    const network = infuraNetworks[chainId];\n    if (network) {\n        rpcUrl = `https://${network}.infura.io/v3/${infuraId}`;\n    }\n    return rpcUrl;\n}\nexport function getRpcUrl(chainId, rpc) {\n    let rpcUrl;\n    const infuraUrl = getInfuraRpcUrl(chainId, rpc.infuraId);\n    if (rpc.custom && rpc.custom[chainId]) {\n        rpcUrl = rpc.custom[chainId];\n    }\n    else if (infuraUrl) {\n        rpcUrl = infuraUrl;\n    }\n    return rpcUrl;\n}\n//# sourceMappingURL=misc.js.map","import * as encoding from \"@walletconnect/encoding\";\nimport { signingMethods, reservedEvents } from \"./constants\";\nexport function isEmptyString(value) {\n    return value === \"\" || (typeof value === \"string\" && value.trim() === \"\");\n}\nexport function isEmptyArray(array) {\n    return !(array && array.length);\n}\nexport function isBuffer(val) {\n    return encoding.isBuffer(val);\n}\nexport function isTypedArray(val) {\n    return encoding.isTypedArray(val);\n}\nexport function isArrayBuffer(val) {\n    return encoding.isArrayBuffer(val);\n}\nexport function getType(val) {\n    return encoding.getType(val);\n}\nexport function getEncoding(val) {\n    return encoding.getEncoding(val);\n}\nexport function isHexString(value, length) {\n    return encoding.isHexString(value, length);\n}\nexport function isJsonRpcSubscription(object) {\n    return typeof object.params === \"object\";\n}\nexport function isJsonRpcRequest(object) {\n    return typeof object.method !== \"undefined\";\n}\nexport function isJsonRpcResponseSuccess(object) {\n    return typeof object.result !== \"undefined\";\n}\nexport function isJsonRpcResponseError(object) {\n    return typeof object.error !== \"undefined\";\n}\nexport function isInternalEvent(object) {\n    return typeof object.event !== \"undefined\";\n}\nexport function isReservedEvent(event) {\n    return reservedEvents.includes(event) || event.startsWith(\"wc_\");\n}\nexport function isSilentPayload(request) {\n    if (request.method.startsWith(\"wc_\")) {\n        return true;\n    }\n    if (signingMethods.includes(request.method)) {\n        return false;\n    }\n    return true;\n}\n//# sourceMappingURL=validators.js.map","import { keccak_256 } from \"js-sha3\";\nimport { removeHexPrefix, addHexPrefix } from \"@walletconnect/encoding\";\nimport { convertUtf8ToHex, convertNumberToHex, convertUtf8ToBuffer } from \"./encoding\";\nimport { sanitizeHex, removeHexLeadingZeros } from \"./misc\";\nimport { isEmptyArray, isHexString, isEmptyString } from \"./validators\";\nexport function toChecksumAddress(address) {\n    address = removeHexPrefix(address.toLowerCase());\n    const hash = removeHexPrefix(keccak_256(convertUtf8ToBuffer(address)));\n    let checksum = \"\";\n    for (let i = 0; i < address.length; i++) {\n        if (parseInt(hash[i], 16) > 7) {\n            checksum += address[i].toUpperCase();\n        }\n        else {\n            checksum += address[i];\n        }\n    }\n    return addHexPrefix(checksum);\n}\nexport const isValidAddress = (address) => {\n    if (!address) {\n        return false;\n    }\n    else if (address.toLowerCase().substring(0, 2) !== \"0x\") {\n        return false;\n    }\n    else if (!/^(0x)?[0-9a-f]{40}$/i.test(address)) {\n        return false;\n    }\n    else if (/^(0x)?[0-9a-f]{40}$/.test(address) || /^(0x)?[0-9A-F]{40}$/.test(address)) {\n        return true;\n    }\n    else {\n        return address === toChecksumAddress(address);\n    }\n};\nexport function parsePersonalSign(params) {\n    if (!isEmptyArray(params) && !isHexString(params[0])) {\n        params[0] = convertUtf8ToHex(params[0]);\n    }\n    return params;\n}\nexport function parseTransactionData(txData) {\n    if (typeof txData.type !== \"undefined\" && txData.type !== \"0\")\n        return txData;\n    if (typeof txData.from === \"undefined\" || !isValidAddress(txData.from)) {\n        throw new Error(`Transaction object must include a valid 'from' value.`);\n    }\n    function parseHexValues(value) {\n        let result = value;\n        if (typeof value === \"number\" || (typeof value === \"string\" && !isEmptyString(value))) {\n            if (!isHexString(value)) {\n                result = convertNumberToHex(value);\n            }\n            else if (typeof value === \"string\") {\n                result = sanitizeHex(value);\n            }\n        }\n        if (typeof result === \"string\") {\n            result = removeHexLeadingZeros(result);\n        }\n        return result;\n    }\n    const txDataRPC = {\n        from: sanitizeHex(txData.from),\n        to: typeof txData.to === \"undefined\" ? undefined : sanitizeHex(txData.to),\n        gasPrice: typeof txData.gasPrice === \"undefined\" ? \"\" : parseHexValues(txData.gasPrice),\n        gas: typeof txData.gas === \"undefined\"\n            ? typeof txData.gasLimit === \"undefined\"\n                ? \"\"\n                : parseHexValues(txData.gasLimit)\n            : parseHexValues(txData.gas),\n        value: typeof txData.value === \"undefined\" ? \"\" : parseHexValues(txData.value),\n        nonce: typeof txData.nonce === \"undefined\" ? \"\" : parseHexValues(txData.nonce),\n        data: typeof txData.data === \"undefined\" ? \"\" : sanitizeHex(txData.data) || \"0x\",\n    };\n    const prunable = [\"gasPrice\", \"gas\", \"value\", \"nonce\"];\n    Object.keys(txDataRPC).forEach((key) => {\n        if ((typeof txDataRPC[key] === \"undefined\" ||\n            (typeof txDataRPC[key] === \"string\" && !txDataRPC[key].trim().length)) &&\n            prunable.includes(key)) {\n            delete txDataRPC[key];\n        }\n    });\n    return txDataRPC;\n}\n//# sourceMappingURL=ethereum.js.map","import * as queryStringUtils from \"query-string\";\nexport function getQueryString(url) {\n    const pathEnd = url.indexOf(\"?\") !== -1 ? url.indexOf(\"?\") : undefined;\n    const queryString = typeof pathEnd !== \"undefined\" ? url.substr(pathEnd) : \"\";\n    return queryString;\n}\nexport function appendToQueryString(queryString, newQueryParams) {\n    let queryParams = parseQueryString(queryString);\n    queryParams = Object.assign(Object.assign({}, queryParams), newQueryParams);\n    queryString = formatQueryString(queryParams);\n    return queryString;\n}\nexport function parseQueryString(queryString) {\n    return queryStringUtils.parse(queryString);\n}\nexport function formatQueryString(queryParams) {\n    return queryStringUtils.stringify(queryParams);\n}\n//# sourceMappingURL=url.js.map","class NetworkMonitor {\n    constructor() {\n        this._eventEmitters = [];\n        if (typeof window !== \"undefined\" && typeof window.addEventListener !== \"undefined\") {\n            window.addEventListener(\"online\", () => this.trigger(\"online\"));\n            window.addEventListener(\"offline\", () => this.trigger(\"offline\"));\n        }\n    }\n    on(event, callback) {\n        this._eventEmitters.push({\n            event,\n            callback,\n        });\n    }\n    trigger(event) {\n        let eventEmitters = [];\n        if (event) {\n            eventEmitters = this._eventEmitters.filter((eventEmitter) => eventEmitter.event === event);\n        }\n        eventEmitters.forEach((eventEmitter) => {\n            eventEmitter.callback();\n        });\n    }\n}\nexport default NetworkMonitor;\n//# sourceMappingURL=network.js.map","import { isBrowser, getLocation, getQueryString, detectEnv, appendToQueryString, } from \"@walletconnect/utils\";\nimport NetworkMonitor from \"./network\";\nconst WS = typeof global.WebSocket !== \"undefined\" ? global.WebSocket : require(\"ws\");\nclass SocketTransport {\n    constructor(opts) {\n        this.opts = opts;\n        this._queue = [];\n        this._events = [];\n        this._subscriptions = [];\n        this._protocol = opts.protocol;\n        this._version = opts.version;\n        this._url = \"\";\n        this._netMonitor = null;\n        this._socket = null;\n        this._nextSocket = null;\n        this._subscriptions = opts.subscriptions || [];\n        this._netMonitor = opts.netMonitor || new NetworkMonitor();\n        if (!opts.url || typeof opts.url !== \"string\") {\n            throw new Error(\"Missing or invalid WebSocket url\");\n        }\n        this._url = opts.url;\n        this._netMonitor.on(\"online\", () => this._socketCreate());\n    }\n    set readyState(value) {\n    }\n    get readyState() {\n        return this._socket ? this._socket.readyState : -1;\n    }\n    set connecting(value) {\n    }\n    get connecting() {\n        return this.readyState === 0;\n    }\n    set connected(value) {\n    }\n    get connected() {\n        return this.readyState === 1;\n    }\n    set closing(value) {\n    }\n    get closing() {\n        return this.readyState === 2;\n    }\n    set closed(value) {\n    }\n    get closed() {\n        return this.readyState === 3;\n    }\n    open() {\n        this._socketCreate();\n    }\n    close() {\n        this._socketClose();\n    }\n    send(message, topic, silent) {\n        if (!topic || typeof topic !== \"string\") {\n            throw new Error(\"Missing or invalid topic field\");\n        }\n        this._socketSend({\n            topic: topic,\n            type: \"pub\",\n            payload: message,\n            silent: !!silent,\n        });\n    }\n    subscribe(topic) {\n        this._socketSend({\n            topic: topic,\n            type: \"sub\",\n            payload: \"\",\n            silent: true,\n        });\n    }\n    on(event, callback) {\n        this._events.push({ event, callback });\n    }\n    _socketCreate() {\n        if (this._nextSocket) {\n            return;\n        }\n        const url = getWebSocketUrl(this._url, this._protocol, this._version);\n        this._nextSocket = new WS(url);\n        if (!this._nextSocket) {\n            throw new Error(\"Failed to create socket\");\n        }\n        this._nextSocket.onmessage = (event) => this._socketReceive(event);\n        this._nextSocket.onopen = () => this._socketOpen();\n        this._nextSocket.onerror = (event) => this._socketError(event);\n        this._nextSocket.onclose = () => {\n            setTimeout(() => {\n                this._nextSocket = null;\n                this._socketCreate();\n            }, 1000);\n        };\n    }\n    _socketOpen() {\n        this._socketClose();\n        this._socket = this._nextSocket;\n        this._nextSocket = null;\n        this._queueSubscriptions();\n        this._pushQueue();\n    }\n    _socketClose() {\n        if (this._socket) {\n            this._socket.onclose = () => {\n            };\n            this._socket.close();\n        }\n    }\n    _socketSend(socketMessage) {\n        const message = JSON.stringify(socketMessage);\n        if (this._socket && this._socket.readyState === 1) {\n            this._socket.send(message);\n        }\n        else {\n            this._setToQueue(socketMessage);\n            this._socketCreate();\n        }\n    }\n    async _socketReceive(event) {\n        let socketMessage;\n        try {\n            socketMessage = JSON.parse(event.data);\n        }\n        catch (error) {\n            return;\n        }\n        this._socketSend({\n            topic: socketMessage.topic,\n            type: \"ack\",\n            payload: \"\",\n            silent: true,\n        });\n        if (this._socket && this._socket.readyState === 1) {\n            const events = this._events.filter(event => event.event === \"message\");\n            if (events && events.length) {\n                events.forEach(event => event.callback(socketMessage));\n            }\n        }\n    }\n    _socketError(e) {\n        const events = this._events.filter(event => event.event === \"error\");\n        if (events && events.length) {\n            events.forEach(event => event.callback(e));\n        }\n    }\n    _queueSubscriptions() {\n        const subscriptions = this._subscriptions;\n        subscriptions.forEach((topic) => this._queue.push({\n            topic: topic,\n            type: \"sub\",\n            payload: \"\",\n            silent: true,\n        }));\n        this._subscriptions = this.opts.subscriptions || [];\n    }\n    _setToQueue(socketMessage) {\n        this._queue.push(socketMessage);\n    }\n    _pushQueue() {\n        const queue = this._queue;\n        queue.forEach((socketMessage) => this._socketSend(socketMessage));\n        this._queue = [];\n    }\n}\nfunction getWebSocketUrl(_url, protocol, version) {\n    var _a, _b;\n    const url = _url.startsWith(\"https\")\n        ? _url.replace(\"https\", \"wss\")\n        : _url.startsWith(\"http\")\n            ? _url.replace(\"http\", \"ws\")\n            : _url;\n    const splitUrl = url.split(\"?\");\n    const params = isBrowser()\n        ? {\n            protocol,\n            version,\n            env: \"browser\",\n            host: ((_a = getLocation()) === null || _a === void 0 ? void 0 : _a.host) || \"\",\n        }\n        : {\n            protocol,\n            version,\n            env: ((_b = detectEnv()) === null || _b === void 0 ? void 0 : _b.name) || \"\",\n        };\n    const queryString = appendToQueryString(getQueryString(splitUrl[1] || \"\"), params);\n    return splitUrl[0] + \"?\" + queryString;\n}\nexport default SocketTransport;\n//# sourceMappingURL=index.js.map","export const ERROR_SESSION_CONNECTED = \"Session currently connected\";\nexport const ERROR_SESSION_DISCONNECTED = \"Session currently disconnected\";\nexport const ERROR_SESSION_REJECTED = \"Session Rejected\";\nexport const ERROR_MISSING_JSON_RPC = \"Missing JSON RPC response\";\nexport const ERROR_MISSING_RESULT = `JSON-RPC success response must include \"result\" field`;\nexport const ERROR_MISSING_ERROR = `JSON-RPC error response must include \"error\" field`;\nexport const ERROR_MISSING_METHOD = `JSON RPC request must have valid \"method\" value`;\nexport const ERROR_MISSING_ID = `JSON RPC request must have valid \"id\" value`;\nexport const ERROR_MISSING_REQUIRED = \"Missing one of the required parameters: bridge / uri / session\";\nexport const ERROR_INVALID_RESPONSE = \"JSON RPC response format is invalid\";\nexport const ERROR_INVALID_URI = \"URI format is invalid\";\nexport const ERROR_QRCODE_MODAL_NOT_PROVIDED = \"QRCode Modal not provided\";\nexport const ERROR_QRCODE_MODAL_USER_CLOSED = \"User close QRCode Modal\";\n//# sourceMappingURL=errors.js.map","import { isJsonRpcRequest, isJsonRpcResponseSuccess, isJsonRpcResponseError, isInternalEvent, isReservedEvent, } from \"@walletconnect/utils\";\nclass EventManager {\n    constructor() {\n        this._eventEmitters = [];\n    }\n    subscribe(eventEmitter) {\n        this._eventEmitters.push(eventEmitter);\n    }\n    unsubscribe(event) {\n        this._eventEmitters = this._eventEmitters.filter(x => x.event !== event);\n    }\n    trigger(payload) {\n        let eventEmitters = [];\n        let event;\n        if (isJsonRpcRequest(payload)) {\n            event = payload.method;\n        }\n        else if (isJsonRpcResponseSuccess(payload) || isJsonRpcResponseError(payload)) {\n            event = `response:${payload.id}`;\n        }\n        else if (isInternalEvent(payload)) {\n            event = payload.event;\n        }\n        else {\n            event = \"\";\n        }\n        if (event) {\n            eventEmitters = this._eventEmitters.filter((eventEmitter) => eventEmitter.event === event);\n        }\n        if ((!eventEmitters || !eventEmitters.length) &&\n            !isReservedEvent(event) &&\n            !isInternalEvent(event)) {\n            eventEmitters = this._eventEmitters.filter((eventEmitter) => eventEmitter.event === \"call_request\");\n        }\n        eventEmitters.forEach((eventEmitter) => {\n            if (isJsonRpcResponseError(payload)) {\n                const error = new Error(payload.error.message);\n                eventEmitter.callback(error, null);\n            }\n            else {\n                eventEmitter.callback(null, payload);\n            }\n        });\n    }\n}\nexport default EventManager;\n//# sourceMappingURL=events.js.map","import { isWalletConnectSession, getLocal, setLocal, removeLocal } from \"@walletconnect/utils\";\nclass SessionStorage {\n    constructor(storageId = \"walletconnect\") {\n        this.storageId = storageId;\n    }\n    getSession() {\n        let session = null;\n        const json = getLocal(this.storageId);\n        if (json && isWalletConnectSession(json)) {\n            session = json;\n        }\n        return session;\n    }\n    setSession(session) {\n        setLocal(this.storageId, session);\n        return session;\n    }\n    removeSession() {\n        removeLocal(this.storageId);\n    }\n}\nexport default SessionStorage;\n//# sourceMappingURL=storage.js.map","import { parseQueryString } from \"./url\";\nexport function isWalletConnectSession(object) {\n    return typeof object.bridge !== \"undefined\";\n}\nexport function parseWalletConnectUri(str) {\n    const pathStart = str.indexOf(\":\");\n    const pathEnd = str.indexOf(\"?\") !== -1 ? str.indexOf(\"?\") : undefined;\n    const protocol = str.substring(0, pathStart);\n    const path = str.substring(pathStart + 1, pathEnd);\n    function parseRequiredParams(path) {\n        const separator = \"@\";\n        const values = path.split(separator);\n        const requiredParams = {\n            handshakeTopic: values[0],\n            version: parseInt(values[1], 10),\n        };\n        return requiredParams;\n    }\n    const requiredParams = parseRequiredParams(path);\n    const queryString = typeof pathEnd !== \"undefined\" ? str.substr(pathEnd) : \"\";\n    function parseQueryParams(queryString) {\n        const result = parseQueryString(queryString);\n        const parameters = {\n            key: result.key || \"\",\n            bridge: result.bridge || \"\",\n        };\n        return parameters;\n    }\n    const queryParams = parseQueryParams(queryString);\n    const result = Object.assign(Object.assign({ protocol }, requiredParams), queryParams);\n    return result;\n}\n//# sourceMappingURL=session.js.map","const domain = \"walletconnect.org\";\nconst alphanumerical = \"abcdefghijklmnopqrstuvwxyz0123456789\";\nconst bridges = alphanumerical.split(\"\").map(char => `https://${char}.bridge.walletconnect.org`);\nexport function extractHostname(url) {\n    let hostname = url.indexOf(\"//\") > -1 ? url.split(\"/\")[2] : url.split(\"/\")[0];\n    hostname = hostname.split(\":\")[0];\n    hostname = hostname.split(\"?\")[0];\n    return hostname;\n}\nexport function extractRootDomain(url) {\n    return extractHostname(url)\n        .split(\".\")\n        .slice(-2)\n        .join(\".\");\n}\nexport function randomBridgeIndex() {\n    return Math.floor(Math.random() * bridges.length);\n}\nexport function selectRandomBridgeUrl() {\n    return bridges[randomBridgeIndex()];\n}\nexport function shouldSelectRandomly(url) {\n    return extractRootDomain(url) === domain;\n}\nexport function getBridgeUrl(url) {\n    if (shouldSelectRandomly(url)) {\n        return selectRandomBridgeUrl();\n    }\n    return url;\n}\n//# sourceMappingURL=url.js.map","import { parsePersonalSign, parseTransactionData, convertArrayBufferToHex, convertHexToArrayBuffer, getClientMeta, payloadId, uuid, formatRpcError, parseWalletConnectUri, convertNumberToHex, isJsonRpcResponseSuccess, isJsonRpcResponseError, isSilentPayload, getLocal, signingMethods, mobileLinkChoiceKey, isMobile, removeLocal, } from \"@walletconnect/utils\";\nimport SocketTransport from \"@walletconnect/socket-transport\";\nimport { ERROR_SESSION_CONNECTED, ERROR_SESSION_DISCONNECTED, ERROR_SESSION_REJECTED, ERROR_MISSING_JSON_RPC, ERROR_MISSING_RESULT, ERROR_MISSING_ERROR, ERROR_MISSING_METHOD, ERROR_MISSING_ID, ERROR_INVALID_RESPONSE, ERROR_INVALID_URI, ERROR_MISSING_REQUIRED, ERROR_QRCODE_MODAL_NOT_PROVIDED, ERROR_QRCODE_MODAL_USER_CLOSED, } from \"./errors\";\nimport EventManager from \"./events\";\nimport SessionStorage from \"./storage\";\nimport { getBridgeUrl } from \"./url\";\nclass Connector {\n    constructor(opts) {\n        this.protocol = \"wc\";\n        this.version = 1;\n        this._bridge = \"\";\n        this._key = null;\n        this._clientId = \"\";\n        this._clientMeta = null;\n        this._peerId = \"\";\n        this._peerMeta = null;\n        this._handshakeId = 0;\n        this._handshakeTopic = \"\";\n        this._connected = false;\n        this._accounts = [];\n        this._chainId = 0;\n        this._networkId = 0;\n        this._rpcUrl = \"\";\n        this._eventManager = new EventManager();\n        this._clientMeta = getClientMeta() || opts.connectorOpts.clientMeta || null;\n        this._cryptoLib = opts.cryptoLib;\n        this._sessionStorage = opts.sessionStorage || new SessionStorage(opts.connectorOpts.storageId);\n        this._qrcodeModal = opts.connectorOpts.qrcodeModal;\n        this._qrcodeModalOptions = opts.connectorOpts.qrcodeModalOptions;\n        this._signingMethods = [...signingMethods, ...(opts.connectorOpts.signingMethods || [])];\n        if (!opts.connectorOpts.bridge && !opts.connectorOpts.uri && !opts.connectorOpts.session) {\n            throw new Error(ERROR_MISSING_REQUIRED);\n        }\n        if (opts.connectorOpts.bridge) {\n            this.bridge = getBridgeUrl(opts.connectorOpts.bridge);\n        }\n        if (opts.connectorOpts.uri) {\n            this.uri = opts.connectorOpts.uri;\n        }\n        const session = opts.connectorOpts.session || this._getStorageSession();\n        if (session) {\n            this.session = session;\n        }\n        if (this.handshakeId) {\n            this._subscribeToSessionResponse(this.handshakeId, \"Session request rejected\");\n        }\n        this._transport =\n            opts.transport ||\n                new SocketTransport({\n                    protocol: this.protocol,\n                    version: this.version,\n                    url: this.bridge,\n                    subscriptions: [this.clientId],\n                });\n        this._subscribeToInternalEvents();\n        this._initTransport();\n        if (opts.connectorOpts.uri) {\n            this._subscribeToSessionRequest();\n        }\n        if (opts.pushServerOpts) {\n            this._registerPushServer(opts.pushServerOpts);\n        }\n    }\n    set bridge(value) {\n        if (!value) {\n            return;\n        }\n        this._bridge = value;\n    }\n    get bridge() {\n        return this._bridge;\n    }\n    set key(value) {\n        if (!value) {\n            return;\n        }\n        const key = convertHexToArrayBuffer(value);\n        this._key = key;\n    }\n    get key() {\n        if (this._key) {\n            const key = convertArrayBufferToHex(this._key, true);\n            return key;\n        }\n        return \"\";\n    }\n    set clientId(value) {\n        if (!value) {\n            return;\n        }\n        this._clientId = value;\n    }\n    get clientId() {\n        let clientId = this._clientId;\n        if (!clientId) {\n            clientId = this._clientId = uuid();\n        }\n        return this._clientId;\n    }\n    set peerId(value) {\n        if (!value) {\n            return;\n        }\n        this._peerId = value;\n    }\n    get peerId() {\n        return this._peerId;\n    }\n    set clientMeta(value) {\n    }\n    get clientMeta() {\n        let clientMeta = this._clientMeta;\n        if (!clientMeta) {\n            clientMeta = this._clientMeta = getClientMeta();\n        }\n        return clientMeta;\n    }\n    set peerMeta(value) {\n        this._peerMeta = value;\n    }\n    get peerMeta() {\n        const peerMeta = this._peerMeta;\n        return peerMeta;\n    }\n    set handshakeTopic(value) {\n        if (!value) {\n            return;\n        }\n        this._handshakeTopic = value;\n    }\n    get handshakeTopic() {\n        return this._handshakeTopic;\n    }\n    set handshakeId(value) {\n        if (!value) {\n            return;\n        }\n        this._handshakeId = value;\n    }\n    get handshakeId() {\n        return this._handshakeId;\n    }\n    get uri() {\n        const _uri = this._formatUri();\n        return _uri;\n    }\n    set uri(value) {\n        if (!value) {\n            return;\n        }\n        const { handshakeTopic, bridge, key } = this._parseUri(value);\n        this.handshakeTopic = handshakeTopic;\n        this.bridge = bridge;\n        this.key = key;\n    }\n    set chainId(value) {\n        this._chainId = value;\n    }\n    get chainId() {\n        const chainId = this._chainId;\n        return chainId;\n    }\n    set networkId(value) {\n        this._networkId = value;\n    }\n    get networkId() {\n        const networkId = this._networkId;\n        return networkId;\n    }\n    set accounts(value) {\n        this._accounts = value;\n    }\n    get accounts() {\n        const accounts = this._accounts;\n        return accounts;\n    }\n    set rpcUrl(value) {\n        this._rpcUrl = value;\n    }\n    get rpcUrl() {\n        const rpcUrl = this._rpcUrl;\n        return rpcUrl;\n    }\n    set connected(value) {\n    }\n    get connected() {\n        return this._connected;\n    }\n    set pending(value) {\n    }\n    get pending() {\n        return !!this._handshakeTopic;\n    }\n    get session() {\n        return {\n            connected: this.connected,\n            accounts: this.accounts,\n            chainId: this.chainId,\n            bridge: this.bridge,\n            key: this.key,\n            clientId: this.clientId,\n            clientMeta: this.clientMeta,\n            peerId: this.peerId,\n            peerMeta: this.peerMeta,\n            handshakeId: this.handshakeId,\n            handshakeTopic: this.handshakeTopic,\n        };\n    }\n    set session(value) {\n        if (!value) {\n            return;\n        }\n        this._connected = value.connected;\n        this.accounts = value.accounts;\n        this.chainId = value.chainId;\n        this.bridge = value.bridge;\n        this.key = value.key;\n        this.clientId = value.clientId;\n        this.clientMeta = value.clientMeta;\n        this.peerId = value.peerId;\n        this.peerMeta = value.peerMeta;\n        this.handshakeId = value.handshakeId;\n        this.handshakeTopic = value.handshakeTopic;\n    }\n    on(event, callback) {\n        const eventEmitter = {\n            event,\n            callback,\n        };\n        this._eventManager.subscribe(eventEmitter);\n    }\n    off(event) {\n        this._eventManager.unsubscribe(event);\n    }\n    async createInstantRequest(instantRequest) {\n        this._key = await this._generateKey();\n        const request = this._formatRequest({\n            method: \"wc_instantRequest\",\n            params: [\n                {\n                    peerId: this.clientId,\n                    peerMeta: this.clientMeta,\n                    request: this._formatRequest(instantRequest),\n                },\n            ],\n        });\n        this.handshakeId = request.id;\n        this.handshakeTopic = uuid();\n        this._eventManager.trigger({\n            event: \"display_uri\",\n            params: [this.uri],\n        });\n        this.on(\"modal_closed\", () => {\n            throw new Error(ERROR_QRCODE_MODAL_USER_CLOSED);\n        });\n        const endInstantRequest = () => {\n            this.killSession();\n        };\n        try {\n            const result = await this._sendCallRequest(request);\n            if (result) {\n                endInstantRequest();\n            }\n            return result;\n        }\n        catch (error) {\n            endInstantRequest();\n            throw error;\n        }\n    }\n    async connect(opts) {\n        if (!this._qrcodeModal) {\n            throw new Error(ERROR_QRCODE_MODAL_NOT_PROVIDED);\n        }\n        if (this.connected) {\n            return {\n                chainId: this.chainId,\n                accounts: this.accounts,\n            };\n        }\n        await this.createSession(opts);\n        return new Promise(async (resolve, reject) => {\n            this.on(\"modal_closed\", () => reject(new Error(ERROR_QRCODE_MODAL_USER_CLOSED)));\n            this.on(\"connect\", (error, payload) => {\n                if (error) {\n                    return reject(error);\n                }\n                resolve(payload.params[0]);\n            });\n        });\n    }\n    async createSession(opts) {\n        if (this._connected) {\n            throw new Error(ERROR_SESSION_CONNECTED);\n        }\n        if (this.pending) {\n            return;\n        }\n        this._key = await this._generateKey();\n        const request = this._formatRequest({\n            method: \"wc_sessionRequest\",\n            params: [\n                {\n                    peerId: this.clientId,\n                    peerMeta: this.clientMeta,\n                    chainId: opts && opts.chainId ? opts.chainId : null,\n                },\n            ],\n        });\n        this.handshakeId = request.id;\n        this.handshakeTopic = uuid();\n        this._sendSessionRequest(request, \"Session update rejected\", {\n            topic: this.handshakeTopic,\n        });\n        this._eventManager.trigger({\n            event: \"display_uri\",\n            params: [this.uri],\n        });\n    }\n    approveSession(sessionStatus) {\n        if (this._connected) {\n            throw new Error(ERROR_SESSION_CONNECTED);\n        }\n        this.chainId = sessionStatus.chainId;\n        this.accounts = sessionStatus.accounts;\n        this.networkId = sessionStatus.networkId || 0;\n        this.rpcUrl = sessionStatus.rpcUrl || \"\";\n        const sessionParams = {\n            approved: true,\n            chainId: this.chainId,\n            networkId: this.networkId,\n            accounts: this.accounts,\n            rpcUrl: this.rpcUrl,\n            peerId: this.clientId,\n            peerMeta: this.clientMeta,\n        };\n        const response = {\n            id: this.handshakeId,\n            jsonrpc: \"2.0\",\n            result: sessionParams,\n        };\n        this._sendResponse(response);\n        this._connected = true;\n        this._setStorageSession();\n        this._eventManager.trigger({\n            event: \"connect\",\n            params: [\n                {\n                    peerId: this.peerId,\n                    peerMeta: this.peerMeta,\n                    chainId: this.chainId,\n                    accounts: this.accounts,\n                },\n            ],\n        });\n    }\n    rejectSession(sessionError) {\n        if (this._connected) {\n            throw new Error(ERROR_SESSION_CONNECTED);\n        }\n        const message = sessionError && sessionError.message ? sessionError.message : ERROR_SESSION_REJECTED;\n        const response = this._formatResponse({\n            id: this.handshakeId,\n            error: { message },\n        });\n        this._sendResponse(response);\n        this._connected = false;\n        this._eventManager.trigger({\n            event: \"disconnect\",\n            params: [{ message }],\n        });\n        this._removeStorageSession();\n    }\n    updateSession(sessionStatus) {\n        if (!this._connected) {\n            throw new Error(ERROR_SESSION_DISCONNECTED);\n        }\n        this.chainId = sessionStatus.chainId;\n        this.accounts = sessionStatus.accounts;\n        this.networkId = sessionStatus.networkId || 0;\n        this.rpcUrl = sessionStatus.rpcUrl || \"\";\n        const sessionParams = {\n            approved: true,\n            chainId: this.chainId,\n            networkId: this.networkId,\n            accounts: this.accounts,\n            rpcUrl: this.rpcUrl,\n        };\n        const request = this._formatRequest({\n            method: \"wc_sessionUpdate\",\n            params: [sessionParams],\n        });\n        this._sendSessionRequest(request, \"Session update rejected\");\n        this._eventManager.trigger({\n            event: \"session_update\",\n            params: [\n                {\n                    chainId: this.chainId,\n                    accounts: this.accounts,\n                },\n            ],\n        });\n        this._manageStorageSession();\n    }\n    async killSession(sessionError) {\n        const message = sessionError ? sessionError.message : \"Session Disconnected\";\n        const sessionParams = {\n            approved: false,\n            chainId: null,\n            networkId: null,\n            accounts: null,\n        };\n        const request = this._formatRequest({\n            method: \"wc_sessionUpdate\",\n            params: [sessionParams],\n        });\n        await this._sendRequest(request);\n        this._handleSessionDisconnect(message);\n    }\n    async sendTransaction(tx) {\n        if (!this._connected) {\n            throw new Error(ERROR_SESSION_DISCONNECTED);\n        }\n        const parsedTx = parseTransactionData(tx);\n        const request = this._formatRequest({\n            method: \"eth_sendTransaction\",\n            params: [parsedTx],\n        });\n        const result = await this._sendCallRequest(request);\n        return result;\n    }\n    async signTransaction(tx) {\n        if (!this._connected) {\n            throw new Error(ERROR_SESSION_DISCONNECTED);\n        }\n        const parsedTx = parseTransactionData(tx);\n        const request = this._formatRequest({\n            method: \"eth_signTransaction\",\n            params: [parsedTx],\n        });\n        const result = await this._sendCallRequest(request);\n        return result;\n    }\n    async signMessage(params) {\n        if (!this._connected) {\n            throw new Error(ERROR_SESSION_DISCONNECTED);\n        }\n        const request = this._formatRequest({\n            method: \"eth_sign\",\n            params,\n        });\n        const result = await this._sendCallRequest(request);\n        return result;\n    }\n    async signPersonalMessage(params) {\n        if (!this._connected) {\n            throw new Error(ERROR_SESSION_DISCONNECTED);\n        }\n        params = parsePersonalSign(params);\n        const request = this._formatRequest({\n            method: \"personal_sign\",\n            params,\n        });\n        const result = await this._sendCallRequest(request);\n        return result;\n    }\n    async signTypedData(params) {\n        if (!this._connected) {\n            throw new Error(ERROR_SESSION_DISCONNECTED);\n        }\n        const request = this._formatRequest({\n            method: \"eth_signTypedData\",\n            params,\n        });\n        const result = await this._sendCallRequest(request);\n        return result;\n    }\n    async updateChain(chainParams) {\n        if (!this._connected) {\n            throw new Error(\"Session currently disconnected\");\n        }\n        const request = this._formatRequest({\n            method: \"wallet_updateChain\",\n            params: [chainParams],\n        });\n        const result = await this._sendCallRequest(request);\n        return result;\n    }\n    unsafeSend(request, options) {\n        this._sendRequest(request, options);\n        this._eventManager.trigger({\n            event: \"call_request_sent\",\n            params: [{ request, options }],\n        });\n        return new Promise((resolve, reject) => {\n            this._subscribeToResponse(request.id, (error, payload) => {\n                if (error) {\n                    reject(error);\n                    return;\n                }\n                if (!payload) {\n                    throw new Error(ERROR_MISSING_JSON_RPC);\n                }\n                resolve(payload);\n            });\n        });\n    }\n    async sendCustomRequest(request, options) {\n        if (!this._connected) {\n            throw new Error(ERROR_SESSION_DISCONNECTED);\n        }\n        switch (request.method) {\n            case \"eth_accounts\":\n                return this.accounts;\n            case \"eth_chainId\":\n                return convertNumberToHex(this.chainId);\n            case \"eth_sendTransaction\":\n            case \"eth_signTransaction\":\n                if (request.params) {\n                    request.params[0] = parseTransactionData(request.params[0]);\n                }\n                break;\n            case \"personal_sign\":\n                if (request.params) {\n                    request.params = parsePersonalSign(request.params);\n                }\n                break;\n            default:\n                break;\n        }\n        const formattedRequest = this._formatRequest(request);\n        const result = await this._sendCallRequest(formattedRequest, options);\n        return result;\n    }\n    approveRequest(response) {\n        if (isJsonRpcResponseSuccess(response)) {\n            const formattedResponse = this._formatResponse(response);\n            this._sendResponse(formattedResponse);\n        }\n        else {\n            throw new Error(ERROR_MISSING_RESULT);\n        }\n    }\n    rejectRequest(response) {\n        if (isJsonRpcResponseError(response)) {\n            const formattedResponse = this._formatResponse(response);\n            this._sendResponse(formattedResponse);\n        }\n        else {\n            throw new Error(ERROR_MISSING_ERROR);\n        }\n    }\n    transportClose() {\n        this._transport.close();\n    }\n    async _sendRequest(request, options) {\n        const callRequest = this._formatRequest(request);\n        const encryptionPayload = await this._encrypt(callRequest);\n        const topic = typeof (options === null || options === void 0 ? void 0 : options.topic) !== \"undefined\" ? options.topic : this.peerId;\n        const payload = JSON.stringify(encryptionPayload);\n        const silent = typeof (options === null || options === void 0 ? void 0 : options.forcePushNotification) !== \"undefined\"\n            ? !options.forcePushNotification\n            : isSilentPayload(callRequest);\n        this._transport.send(payload, topic, silent);\n    }\n    async _sendResponse(response) {\n        const encryptionPayload = await this._encrypt(response);\n        const topic = this.peerId;\n        const payload = JSON.stringify(encryptionPayload);\n        const silent = true;\n        this._transport.send(payload, topic, silent);\n    }\n    async _sendSessionRequest(request, errorMsg, options) {\n        this._sendRequest(request, options);\n        this._subscribeToSessionResponse(request.id, errorMsg);\n    }\n    _sendCallRequest(request, options) {\n        this._sendRequest(request, options);\n        this._eventManager.trigger({\n            event: \"call_request_sent\",\n            params: [{ request, options }],\n        });\n        return this._subscribeToCallResponse(request.id);\n    }\n    _formatRequest(request) {\n        if (typeof request.method === \"undefined\") {\n            throw new Error(ERROR_MISSING_METHOD);\n        }\n        const formattedRequest = {\n            id: typeof request.id === \"undefined\" ? payloadId() : request.id,\n            jsonrpc: \"2.0\",\n            method: request.method,\n            params: typeof request.params === \"undefined\" ? [] : request.params,\n        };\n        return formattedRequest;\n    }\n    _formatResponse(response) {\n        if (typeof response.id === \"undefined\") {\n            throw new Error(ERROR_MISSING_ID);\n        }\n        const baseResponse = { id: response.id, jsonrpc: \"2.0\" };\n        if (isJsonRpcResponseError(response)) {\n            const error = formatRpcError(response.error);\n            const errorResponse = Object.assign(Object.assign(Object.assign({}, baseResponse), response), { error });\n            return errorResponse;\n        }\n        else if (isJsonRpcResponseSuccess(response)) {\n            const successResponse = Object.assign(Object.assign({}, baseResponse), response);\n            return successResponse;\n        }\n        throw new Error(ERROR_INVALID_RESPONSE);\n    }\n    _handleSessionDisconnect(errorMsg) {\n        const message = errorMsg || \"Session Disconnected\";\n        if (!this._connected) {\n            if (this._qrcodeModal) {\n                this._qrcodeModal.close();\n            }\n            removeLocal(mobileLinkChoiceKey);\n        }\n        if (this._connected) {\n            this._connected = false;\n        }\n        if (this._handshakeId) {\n            this._handshakeId = 0;\n        }\n        if (this._handshakeTopic) {\n            this._handshakeTopic = \"\";\n        }\n        if (this._peerId) {\n            this._peerId = \"\";\n        }\n        this._eventManager.trigger({\n            event: \"disconnect\",\n            params: [{ message }],\n        });\n        this._removeStorageSession();\n        this.transportClose();\n    }\n    _handleSessionResponse(errorMsg, sessionParams) {\n        if (sessionParams) {\n            if (sessionParams.approved) {\n                if (!this._connected) {\n                    this._connected = true;\n                    if (sessionParams.chainId) {\n                        this.chainId = sessionParams.chainId;\n                    }\n                    if (sessionParams.accounts) {\n                        this.accounts = sessionParams.accounts;\n                    }\n                    if (sessionParams.peerId && !this.peerId) {\n                        this.peerId = sessionParams.peerId;\n                    }\n                    if (sessionParams.peerMeta && !this.peerMeta) {\n                        this.peerMeta = sessionParams.peerMeta;\n                    }\n                    this._eventManager.trigger({\n                        event: \"connect\",\n                        params: [\n                            {\n                                peerId: this.peerId,\n                                peerMeta: this.peerMeta,\n                                chainId: this.chainId,\n                                accounts: this.accounts,\n                            },\n                        ],\n                    });\n                }\n                else {\n                    if (sessionParams.chainId) {\n                        this.chainId = sessionParams.chainId;\n                    }\n                    if (sessionParams.accounts) {\n                        this.accounts = sessionParams.accounts;\n                    }\n                    this._eventManager.trigger({\n                        event: \"session_update\",\n                        params: [\n                            {\n                                chainId: this.chainId,\n                                accounts: this.accounts,\n                            },\n                        ],\n                    });\n                }\n                this._manageStorageSession();\n            }\n            else {\n                this._handleSessionDisconnect(errorMsg);\n            }\n        }\n        else {\n            this._handleSessionDisconnect(errorMsg);\n        }\n    }\n    async _handleIncomingMessages(socketMessage) {\n        const activeTopics = [this.clientId, this.handshakeTopic];\n        if (!activeTopics.includes(socketMessage.topic)) {\n            return;\n        }\n        let encryptionPayload;\n        try {\n            encryptionPayload = JSON.parse(socketMessage.payload);\n        }\n        catch (error) {\n            return;\n        }\n        const payload = await this._decrypt(encryptionPayload);\n        if (payload) {\n            this._eventManager.trigger(payload);\n        }\n    }\n    _subscribeToSessionRequest() {\n        this._transport.subscribe(this.handshakeTopic);\n    }\n    _subscribeToResponse(id, callback) {\n        this.on(`response:${id}`, callback);\n    }\n    _subscribeToSessionResponse(id, errorMsg) {\n        this._subscribeToResponse(id, (error, payload) => {\n            if (error) {\n                this._handleSessionResponse(error.message);\n                return;\n            }\n            if (isJsonRpcResponseSuccess(payload)) {\n                this._handleSessionResponse(errorMsg, payload.result);\n            }\n            else if (payload.error && payload.error.message) {\n                this._handleSessionResponse(payload.error.message);\n            }\n            else {\n                this._handleSessionResponse(errorMsg);\n            }\n        });\n    }\n    _subscribeToCallResponse(id) {\n        return new Promise((resolve, reject) => {\n            this._subscribeToResponse(id, (error, payload) => {\n                if (error) {\n                    reject(error);\n                    return;\n                }\n                if (isJsonRpcResponseSuccess(payload)) {\n                    resolve(payload.result);\n                }\n                else if (payload.error && payload.error.message) {\n                    reject(payload.error);\n                }\n                else {\n                    reject(new Error(ERROR_INVALID_RESPONSE));\n                }\n            });\n        });\n    }\n    _subscribeToInternalEvents() {\n        this.on(\"display_uri\", () => {\n            if (this._qrcodeModal) {\n                this._qrcodeModal.open(this.uri, () => {\n                    this._eventManager.trigger({\n                        event: \"modal_closed\",\n                        params: [],\n                    });\n                }, this._qrcodeModalOptions);\n            }\n        });\n        this.on(\"connect\", () => {\n            if (this._qrcodeModal) {\n                this._qrcodeModal.close();\n            }\n        });\n        this.on(\"call_request_sent\", (error, payload) => {\n            const { request } = payload.params[0];\n            if (isMobile() && this._signingMethods.includes(request.method)) {\n                const mobileLinkUrl = getLocal(mobileLinkChoiceKey);\n                if (mobileLinkUrl) {\n                    window.location.href = mobileLinkUrl.href;\n                }\n            }\n        });\n        this.on(\"wc_sessionRequest\", (error, payload) => {\n            if (error) {\n                this._eventManager.trigger({\n                    event: \"error\",\n                    params: [\n                        {\n                            code: \"SESSION_REQUEST_ERROR\",\n                            message: error.toString(),\n                        },\n                    ],\n                });\n            }\n            this.handshakeId = payload.id;\n            this.peerId = payload.params[0].peerId;\n            this.peerMeta = payload.params[0].peerMeta;\n            const internalPayload = Object.assign(Object.assign({}, payload), { method: \"session_request\" });\n            this._eventManager.trigger(internalPayload);\n        });\n        this.on(\"wc_sessionUpdate\", (error, payload) => {\n            if (error) {\n                this._handleSessionResponse(error.message);\n            }\n            this._handleSessionResponse(\"Session disconnected\", payload.params[0]);\n        });\n    }\n    _initTransport() {\n        this._transport.on(\"message\", (socketMessage) => this._handleIncomingMessages(socketMessage));\n        this._transport.on(\"open\", () => this._eventManager.trigger({ event: \"transport_open\", params: [] }));\n        this._transport.on(\"close\", () => this._eventManager.trigger({ event: \"transport_close\", params: [] }));\n        this._transport.on(\"error\", () => this._eventManager.trigger({\n            event: \"transport_error\",\n            params: [\"Websocket connection failed\"],\n        }));\n        this._transport.open();\n    }\n    _formatUri() {\n        const protocol = this.protocol;\n        const handshakeTopic = this.handshakeTopic;\n        const version = this.version;\n        const bridge = encodeURIComponent(this.bridge);\n        const key = this.key;\n        const uri = `${protocol}:${handshakeTopic}@${version}?bridge=${bridge}&key=${key}`;\n        return uri;\n    }\n    _parseUri(uri) {\n        const result = parseWalletConnectUri(uri);\n        if (result.protocol === this.protocol) {\n            if (!result.handshakeTopic) {\n                throw Error(\"Invalid or missing handshakeTopic parameter value\");\n            }\n            const handshakeTopic = result.handshakeTopic;\n            if (!result.bridge) {\n                throw Error(\"Invalid or missing bridge url parameter value\");\n            }\n            const bridge = decodeURIComponent(result.bridge);\n            if (!result.key) {\n                throw Error(\"Invalid or missing key parameter value\");\n            }\n            const key = result.key;\n            return { handshakeTopic, bridge, key };\n        }\n        else {\n            throw new Error(ERROR_INVALID_URI);\n        }\n    }\n    async _generateKey() {\n        if (this._cryptoLib) {\n            const result = await this._cryptoLib.generateKey();\n            return result;\n        }\n        return null;\n    }\n    async _encrypt(data) {\n        const key = this._key;\n        if (this._cryptoLib && key) {\n            const result = await this._cryptoLib.encrypt(data, key);\n            return result;\n        }\n        return null;\n    }\n    async _decrypt(payload) {\n        const key = this._key;\n        if (this._cryptoLib && key) {\n            const result = await this._cryptoLib.decrypt(payload, key);\n            return result;\n        }\n        return null;\n    }\n    _getStorageSession() {\n        let result = null;\n        if (this._sessionStorage) {\n            result = this._sessionStorage.getSession();\n        }\n        return result;\n    }\n    _setStorageSession() {\n        if (this._sessionStorage) {\n            this._sessionStorage.setSession(this.session);\n        }\n    }\n    _removeStorageSession() {\n        if (this._sessionStorage) {\n            this._sessionStorage.removeSession();\n        }\n    }\n    _manageStorageSession() {\n        if (this._connected) {\n            this._setStorageSession();\n        }\n        else {\n            this._removeStorageSession();\n        }\n    }\n    _registerPushServer(pushServerOpts) {\n        if (!pushServerOpts.url || typeof pushServerOpts.url !== \"string\") {\n            throw Error(\"Invalid or missing pushServerOpts.url parameter value\");\n        }\n        if (!pushServerOpts.type || typeof pushServerOpts.type !== \"string\") {\n            throw Error(\"Invalid or missing pushServerOpts.type parameter value\");\n        }\n        if (!pushServerOpts.token || typeof pushServerOpts.token !== \"string\") {\n            throw Error(\"Invalid or missing pushServerOpts.token parameter value\");\n        }\n        const pushSubscription = {\n            bridge: this.bridge,\n            topic: this.clientId,\n            type: pushServerOpts.type,\n            token: pushServerOpts.token,\n            peerName: \"\",\n            language: pushServerOpts.language || \"\",\n        };\n        this.on(\"connect\", async (error, payload) => {\n            if (error) {\n                throw error;\n            }\n            if (pushServerOpts.peerMeta) {\n                const peerName = payload.params[0].peerMeta.name;\n                pushSubscription.peerName = peerName;\n            }\n            try {\n                const response = await fetch(`${pushServerOpts.url}/new`, {\n                    method: \"POST\",\n                    headers: {\n                        Accept: \"application/json\",\n                        \"Content-Type\": \"application/json\",\n                    },\n                    body: JSON.stringify(pushSubscription),\n                });\n                const json = await response.json();\n                if (!json.success) {\n                    throw Error(\"Failed to register in Push Server\");\n                }\n            }\n            catch (error) {\n                throw Error(\"Failed to register in Push Server\");\n            }\n        });\n    }\n}\nexport default Connector;\n//# sourceMappingURL=index.js.map","export function promisify(originalFn, thisArg) {\n    const promisifiedFunction = async (...callArgs) => {\n        return new Promise((resolve, reject) => {\n            const callback = (err, data) => {\n                if (err === null || typeof err === \"undefined\") {\n                    reject(err);\n                }\n                resolve(data);\n            };\n            originalFn.apply(thisArg, [...callArgs, callback]);\n        });\n    };\n    return promisifiedFunction;\n}\nexport function formatRpcError(error) {\n    const message = error.message || \"Failed or Rejected Request\";\n    let code = -32000;\n    if (error && !error.code) {\n        switch (message) {\n            case \"Parse error\":\n                code = -32700;\n                break;\n            case \"Invalid request\":\n                code = -32600;\n                break;\n            case \"Method not found\":\n                code = -32601;\n                break;\n            case \"Invalid params\":\n                code = -32602;\n                break;\n            case \"Internal error\":\n                code = -32603;\n                break;\n            default:\n                code = -32000;\n                break;\n        }\n    }\n    const result = {\n        code,\n        message,\n    };\n    if (error.data) {\n        result.data = error.data;\n    }\n    return result;\n}\n//# sourceMappingURL=payload.js.map","export const LENGTH_0 = 0;\nexport const LENGTH_1 = 1;\nexport const LENGTH_16 = 16;\nexport const LENGTH_32 = 32;\nexport const LENGTH_64 = 64;\nexport const LENGTH_128 = 128;\nexport const LENGTH_256 = 256;\nexport const LENGTH_512 = 512;\nexport const LENGTH_1024 = 1024;\n//# sourceMappingURL=length.js.map","import { LENGTH_1, LENGTH_32, LENGTH_16, LENGTH_256 } from \"./length\";\nexport const AES_LENGTH = LENGTH_256;\nexport const HMAC_LENGTH = LENGTH_256;\nexport const AES_BROWSER_ALGO = \"AES-CBC\";\nexport const HMAC_BROWSER_ALGO = `SHA-${AES_LENGTH}`;\nexport const HMAC_BROWSER = \"HMAC\";\nexport const SHA256_BROWSER_ALGO = \"SHA-256\";\nexport const SHA512_BROWSER_ALGO = \"SHA-512\";\nexport const AES_NODE_ALGO = `aes-${AES_LENGTH}-cbc`;\nexport const HMAC_NODE_ALGO = `sha${HMAC_LENGTH}`;\nexport const SHA256_NODE_ALGO = \"sha256\";\nexport const SHA512_NODE_ALGO = \"sha512\";\nexport const RIPEMD160_NODE_ALGO = \"ripemd160\";\nexport const PREFIX_LENGTH = LENGTH_1;\nexport const KEY_LENGTH = LENGTH_32;\nexport const IV_LENGTH = LENGTH_16;\nexport const MAC_LENGTH = LENGTH_32;\n//# sourceMappingURL=default.js.map","export const ENCRYPT_OP = \"encrypt\";\nexport const DECRYPT_OP = \"decrypt\";\nexport const SIGN_OP = \"sign\";\nexport const VERIFY_OP = \"verify\";\n//# sourceMappingURL=operations.js.map","import * as env from \"@walletconnect/environment\";\nimport { ENCRYPT_OP, DECRYPT_OP, SIGN_OP, VERIFY_OP, AES_BROWSER_ALGO, AES_LENGTH, HMAC_BROWSER_ALGO, HMAC_BROWSER, HMAC_LENGTH, SHA256_BROWSER_ALGO, SHA512_BROWSER_ALGO, LENGTH_512, } from \"../constants\";\nexport function getAlgo(type) {\n    return type === AES_BROWSER_ALGO\n        ? { length: AES_LENGTH, name: AES_BROWSER_ALGO }\n        : {\n            hash: { name: HMAC_BROWSER_ALGO },\n            name: HMAC_BROWSER,\n        };\n}\nexport function getOps(type) {\n    return type === AES_BROWSER_ALGO\n        ? [ENCRYPT_OP, DECRYPT_OP]\n        : [SIGN_OP, VERIFY_OP];\n}\nexport async function browserExportKey(cryptoKey, type = AES_BROWSER_ALGO) {\n    const subtle = env.getSubtleCrypto();\n    return new Uint8Array(await subtle.exportKey(\"raw\", cryptoKey));\n}\nexport async function browserImportKey(buffer, type = AES_BROWSER_ALGO) {\n    return env.getSubtleCrypto().importKey(\"raw\", buffer, getAlgo(type), true, getOps(type));\n}\nexport async function browserAesEncrypt(iv, key, data) {\n    const subtle = env.getSubtleCrypto();\n    const cryptoKey = await browserImportKey(key, AES_BROWSER_ALGO);\n    const result = await subtle.encrypt({\n        iv,\n        name: AES_BROWSER_ALGO,\n    }, cryptoKey, data);\n    return new Uint8Array(result);\n}\nexport async function browserAesDecrypt(iv, key, data) {\n    const subtle = env.getSubtleCrypto();\n    const cryptoKey = await browserImportKey(key, AES_BROWSER_ALGO);\n    const result = await subtle.decrypt({\n        iv,\n        name: AES_BROWSER_ALGO,\n    }, cryptoKey, data);\n    return new Uint8Array(result);\n}\nexport async function browserHmacSha256Sign(key, data) {\n    const subtle = env.getSubtleCrypto();\n    const cryptoKey = await browserImportKey(key, HMAC_BROWSER);\n    const signature = await subtle.sign({\n        length: HMAC_LENGTH,\n        name: HMAC_BROWSER,\n    }, cryptoKey, data);\n    return new Uint8Array(signature);\n}\nexport async function browserHmacSha512Sign(key, data) {\n    const subtle = env.getSubtleCrypto();\n    const cryptoKey = await browserImportKey(key, HMAC_BROWSER);\n    const signature = await subtle.sign({\n        length: LENGTH_512,\n        name: HMAC_BROWSER,\n    }, cryptoKey, data);\n    return new Uint8Array(signature);\n}\nexport async function browserSha256(data) {\n    const subtle = env.getSubtleCrypto();\n    const result = await subtle.digest({\n        name: SHA256_BROWSER_ALGO,\n    }, data);\n    return new Uint8Array(result);\n}\nexport async function browserSha512(data) {\n    const subtle = env.getSubtleCrypto();\n    const result = await subtle.digest({\n        name: SHA512_BROWSER_ALGO,\n    }, data);\n    return new Uint8Array(result);\n}\n//# sourceMappingURL=browser.js.map","import { browserAesDecrypt, browserAesEncrypt } from \"../lib/browser\";\nexport function aesCbcEncrypt(iv, key, data) {\n    return browserAesEncrypt(iv, key, data);\n}\nexport function aesCbcDecrypt(iv, key, data) {\n    return browserAesDecrypt(iv, key, data);\n}\n//# sourceMappingURL=aes.js.map","import { browserHmacSha256Sign, browserHmacSha512Sign } from \"../lib/browser\";\nimport { isConstantTime } from \"../helpers\";\nexport async function hmacSha256Sign(key, msg) {\n    const result = await browserHmacSha256Sign(key, msg);\n    return result;\n}\nexport async function hmacSha256Verify(key, msg, sig) {\n    const expectedSig = await browserHmacSha256Sign(key, msg);\n    const result = isConstantTime(expectedSig, sig);\n    return result;\n}\nexport async function hmacSha512Sign(key, msg) {\n    const result = await browserHmacSha512Sign(key, msg);\n    return result;\n}\nexport async function hmacSha512Verify(key, msg, sig) {\n    const expectedSig = await browserHmacSha512Sign(key, msg);\n    const result = isConstantTime(expectedSig, sig);\n    return result;\n}\n//# sourceMappingURL=hmac.js.map","import * as crypto from \"@walletconnect/crypto\";\nimport * as encoding from \"@walletconnect/encoding\";\nimport { convertArrayBufferToBuffer, convertBufferToArrayBuffer } from \"@walletconnect/utils\";\nexport async function generateKey(length) {\n    const _length = (length || 256) / 8;\n    const bytes = crypto.randomBytes(_length);\n    const result = convertBufferToArrayBuffer(encoding.arrayToBuffer(bytes));\n    return result;\n}\nexport async function verifyHmac(payload, key) {\n    const cipherText = encoding.hexToArray(payload.data);\n    const iv = encoding.hexToArray(payload.iv);\n    const hmac = encoding.hexToArray(payload.hmac);\n    const hmacHex = encoding.arrayToHex(hmac, false);\n    const unsigned = encoding.concatArrays(cipherText, iv);\n    const chmac = await crypto.hmacSha256Sign(key, unsigned);\n    const chmacHex = encoding.arrayToHex(chmac, false);\n    if (encoding.removeHexPrefix(hmacHex) === encoding.removeHexPrefix(chmacHex)) {\n        return true;\n    }\n    return false;\n}\nexport async function encrypt(data, key, providedIv) {\n    const _key = encoding.bufferToArray(convertArrayBufferToBuffer(key));\n    const ivArrayBuffer = providedIv || (await generateKey(128));\n    const iv = encoding.bufferToArray(convertArrayBufferToBuffer(ivArrayBuffer));\n    const ivHex = encoding.arrayToHex(iv, false);\n    const contentString = JSON.stringify(data);\n    const content = encoding.utf8ToArray(contentString);\n    const cipherText = await crypto.aesCbcEncrypt(iv, _key, content);\n    const cipherTextHex = encoding.arrayToHex(cipherText, false);\n    const unsigned = encoding.concatArrays(cipherText, iv);\n    const hmac = await crypto.hmacSha256Sign(_key, unsigned);\n    const hmacHex = encoding.arrayToHex(hmac, false);\n    return {\n        data: cipherTextHex,\n        hmac: hmacHex,\n        iv: ivHex,\n    };\n}\nexport async function decrypt(payload, key) {\n    const _key = encoding.bufferToArray(convertArrayBufferToBuffer(key));\n    if (!_key) {\n        throw new Error(\"Missing key: required for decryption\");\n    }\n    const verified = await verifyHmac(payload, _key);\n    if (!verified) {\n        return null;\n    }\n    const cipherText = encoding.hexToArray(payload.data);\n    const iv = encoding.hexToArray(payload.iv);\n    const buffer = await crypto.aesCbcDecrypt(iv, _key, cipherText);\n    const utf8 = encoding.arrayToUtf8(buffer);\n    let data;\n    try {\n        data = JSON.parse(utf8);\n    }\n    catch (error) {\n        return null;\n    }\n    return data;\n}\n//# sourceMappingURL=index.js.map","import * as env from \"@walletconnect/environment\";\nexport function randomBytes(length) {\n    const browserCrypto = env.getBrowerCrypto();\n    return browserCrypto.getRandomValues(new Uint8Array(length));\n}\n//# sourceMappingURL=index.js.map","import Connector from \"@walletconnect/core\";\nimport * as cryptoLib from \"@walletconnect/iso-crypto\";\nclass WalletConnect extends Connector {\n    constructor(connectorOpts, pushServerOpts) {\n        super({\n            cryptoLib,\n            connectorOpts,\n            pushServerOpts,\n        });\n    }\n}\nexport default WalletConnect;\n//# sourceMappingURL=index.js.map","'use strict';\n\nmodule.exports = function () {\n  throw new Error(\n    'ws does not work in the browser. Browser clients must use the native ' +\n      'WebSocket object'\n  );\n};\n","/*!\n * The buffer module from node.js, for the browser.\n *\n * @author   Feross Aboukhadijeh <https://feross.org>\n * @license  MIT\n */\n/* eslint-disable no-proto */\n\n'use strict'\n\nconst base64 = require('base64-js')\nconst ieee754 = require('ieee754')\nconst customInspectSymbol =\n  (typeof Symbol === 'function' && typeof Symbol['for'] === 'function') // eslint-disable-line dot-notation\n    ? Symbol['for']('nodejs.util.inspect.custom') // eslint-disable-line dot-notation\n    : null\n\nexports.Buffer = Buffer\nexports.SlowBuffer = SlowBuffer\nexports.INSPECT_MAX_BYTES = 50\n\nconst K_MAX_LENGTH = 0x7fffffff\nexports.kMaxLength = K_MAX_LENGTH\n\n/**\n * If `Buffer.TYPED_ARRAY_SUPPORT`:\n *   === true    Use Uint8Array implementation (fastest)\n *   === false   Print warning and recommend using `buffer` v4.x which has an Object\n *               implementation (most compatible, even IE6)\n *\n * Browsers that support typed arrays are IE 10+, Firefox 4+, Chrome 7+, Safari 5.1+,\n * Opera 11.6+, iOS 4.2+.\n *\n * We report that the browser does not support typed arrays if the are not subclassable\n * using __proto__. Firefox 4-29 lacks support for adding new properties to `Uint8Array`\n * (See: https://bugzilla.mozilla.org/show_bug.cgi?id=695438). IE 10 lacks support\n * for __proto__ and has a buggy typed array implementation.\n */\nBuffer.TYPED_ARRAY_SUPPORT = typedArraySupport()\n\nif (!Buffer.TYPED_ARRAY_SUPPORT && typeof console !== 'undefined' &&\n    typeof console.error === 'function') {\n  console.error(\n    'This browser lacks typed array (Uint8Array) support which is required by ' +\n    '`buffer` v5.x. Use `buffer` v4.x if you require old browser support.'\n  )\n}\n\nfunction typedArraySupport () {\n  // Can typed array instances can be augmented?\n  try {\n    const arr = new Uint8Array(1)\n    const proto = { foo: function () { return 42 } }\n    Object.setPrototypeOf(proto, Uint8Array.prototype)\n    Object.setPrototypeOf(arr, proto)\n    return arr.foo() === 42\n  } catch (e) {\n    return false\n  }\n}\n\nObject.defineProperty(Buffer.prototype, 'parent', {\n  enumerable: true,\n  get: function () {\n    if (!Buffer.isBuffer(this)) return undefined\n    return this.buffer\n  }\n})\n\nObject.defineProperty(Buffer.prototype, 'offset', {\n  enumerable: true,\n  get: function () {\n    if (!Buffer.isBuffer(this)) return undefined\n    return this.byteOffset\n  }\n})\n\nfunction createBuffer (length) {\n  if (length > K_MAX_LENGTH) {\n    throw new RangeError('The value \"' + length + '\" is invalid for option \"size\"')\n  }\n  // Return an augmented `Uint8Array` instance\n  const buf = new Uint8Array(length)\n  Object.setPrototypeOf(buf, Buffer.prototype)\n  return buf\n}\n\n/**\n * The Buffer constructor returns instances of `Uint8Array` that have their\n * prototype changed to `Buffer.prototype`. Furthermore, `Buffer` is a subclass of\n * `Uint8Array`, so the returned instances will have all the node `Buffer` methods\n * and the `Uint8Array` methods. Square bracket notation works as expected -- it\n * returns a single octet.\n *\n * The `Uint8Array` prototype remains unmodified.\n */\n\nfunction Buffer (arg, encodingOrOffset, length) {\n  // Common case.\n  if (typeof arg === 'number') {\n    if (typeof encodingOrOffset === 'string') {\n      throw new TypeError(\n        'The \"string\" argument must be of type string. Received type number'\n      )\n    }\n    return allocUnsafe(arg)\n  }\n  return from(arg, encodingOrOffset, length)\n}\n\nBuffer.poolSize = 8192 // not used by this implementation\n\nfunction from (value, encodingOrOffset, length) {\n  if (typeof value === 'string') {\n    return fromString(value, encodingOrOffset)\n  }\n\n  if (ArrayBuffer.isView(value)) {\n    return fromArrayView(value)\n  }\n\n  if (value == null) {\n    throw new TypeError(\n      'The first argument must be one of type string, Buffer, ArrayBuffer, Array, ' +\n      'or Array-like Object. Received type ' + (typeof value)\n    )\n  }\n\n  if (isInstance(value, ArrayBuffer) ||\n      (value && isInstance(value.buffer, ArrayBuffer))) {\n    return fromArrayBuffer(value, encodingOrOffset, length)\n  }\n\n  if (typeof SharedArrayBuffer !== 'undefined' &&\n      (isInstance(value, SharedArrayBuffer) ||\n      (value && isInstance(value.buffer, SharedArrayBuffer)))) {\n    return fromArrayBuffer(value, encodingOrOffset, length)\n  }\n\n  if (typeof value === 'number') {\n    throw new TypeError(\n      'The \"value\" argument must not be of type number. Received type number'\n    )\n  }\n\n  const valueOf = value.valueOf && value.valueOf()\n  if (valueOf != null && valueOf !== value) {\n    return Buffer.from(valueOf, encodingOrOffset, length)\n  }\n\n  const b = fromObject(value)\n  if (b) return b\n\n  if (typeof Symbol !== 'undefined' && Symbol.toPrimitive != null &&\n      typeof value[Symbol.toPrimitive] === 'function') {\n    return Buffer.from(value[Symbol.toPrimitive]('string'), encodingOrOffset, length)\n  }\n\n  throw new TypeError(\n    'The first argument must be one of type string, Buffer, ArrayBuffer, Array, ' +\n    'or Array-like Object. Received type ' + (typeof value)\n  )\n}\n\n/**\n * Functionally equivalent to Buffer(arg, encoding) but throws a TypeError\n * if value is a number.\n * Buffer.from(str[, encoding])\n * Buffer.from(array)\n * Buffer.from(buffer)\n * Buffer.from(arrayBuffer[, byteOffset[, length]])\n **/\nBuffer.from = function (value, encodingOrOffset, length) {\n  return from(value, encodingOrOffset, length)\n}\n\n// Note: Change prototype *after* Buffer.from is defined to workaround Chrome bug:\n// https://github.com/feross/buffer/pull/148\nObject.setPrototypeOf(Buffer.prototype, Uint8Array.prototype)\nObject.setPrototypeOf(Buffer, Uint8Array)\n\nfunction assertSize (size) {\n  if (typeof size !== 'number') {\n    throw new TypeError('\"size\" argument must be of type number')\n  } else if (size < 0) {\n    throw new RangeError('The value \"' + size + '\" is invalid for option \"size\"')\n  }\n}\n\nfunction alloc (size, fill, encoding) {\n  assertSize(size)\n  if (size <= 0) {\n    return createBuffer(size)\n  }\n  if (fill !== undefined) {\n    // Only pay attention to encoding if it's a string. This\n    // prevents accidentally sending in a number that would\n    // be interpreted as a start offset.\n    return typeof encoding === 'string'\n      ? createBuffer(size).fill(fill, encoding)\n      : createBuffer(size).fill(fill)\n  }\n  return createBuffer(size)\n}\n\n/**\n * Creates a new filled Buffer instance.\n * alloc(size[, fill[, encoding]])\n **/\nBuffer.alloc = function (size, fill, encoding) {\n  return alloc(size, fill, encoding)\n}\n\nfunction allocUnsafe (size) {\n  assertSize(size)\n  return createBuffer(size < 0 ? 0 : checked(size) | 0)\n}\n\n/**\n * Equivalent to Buffer(num), by default creates a non-zero-filled Buffer instance.\n * */\nBuffer.allocUnsafe = function (size) {\n  return allocUnsafe(size)\n}\n/**\n * Equivalent to SlowBuffer(num), by default creates a non-zero-filled Buffer instance.\n */\nBuffer.allocUnsafeSlow = function (size) {\n  return allocUnsafe(size)\n}\n\nfunction fromString (string, encoding) {\n  if (typeof encoding !== 'string' || encoding === '') {\n    encoding = 'utf8'\n  }\n\n  if (!Buffer.isEncoding(encoding)) {\n    throw new TypeError('Unknown encoding: ' + encoding)\n  }\n\n  const length = byteLength(string, encoding) | 0\n  let buf = createBuffer(length)\n\n  const actual = buf.write(string, encoding)\n\n  if (actual !== length) {\n    // Writing a hex string, for example, that contains invalid characters will\n    // cause everything after the first invalid character to be ignored. (e.g.\n    // 'abxxcd' will be treated as 'ab')\n    buf = buf.slice(0, actual)\n  }\n\n  return buf\n}\n\nfunction fromArrayLike (array) {\n  const length = array.length < 0 ? 0 : checked(array.length) | 0\n  const buf = createBuffer(length)\n  for (let i = 0; i < length; i += 1) {\n    buf[i] = array[i] & 255\n  }\n  return buf\n}\n\nfunction fromArrayView (arrayView) {\n  if (isInstance(arrayView, Uint8Array)) {\n    const copy = new Uint8Array(arrayView)\n    return fromArrayBuffer(copy.buffer, copy.byteOffset, copy.byteLength)\n  }\n  return fromArrayLike(arrayView)\n}\n\nfunction fromArrayBuffer (array, byteOffset, length) {\n  if (byteOffset < 0 || array.byteLength < byteOffset) {\n    throw new RangeError('\"offset\" is outside of buffer bounds')\n  }\n\n  if (array.byteLength < byteOffset + (length || 0)) {\n    throw new RangeError('\"length\" is outside of buffer bounds')\n  }\n\n  let buf\n  if (byteOffset === undefined && length === undefined) {\n    buf = new Uint8Array(array)\n  } else if (length === undefined) {\n    buf = new Uint8Array(array, byteOffset)\n  } else {\n    buf = new Uint8Array(array, byteOffset, length)\n  }\n\n  // Return an augmented `Uint8Array` instance\n  Object.setPrototypeOf(buf, Buffer.prototype)\n\n  return buf\n}\n\nfunction fromObject (obj) {\n  if (Buffer.isBuffer(obj)) {\n    const len = checked(obj.length) | 0\n    const buf = createBuffer(len)\n\n    if (buf.length === 0) {\n      return buf\n    }\n\n    obj.copy(buf, 0, 0, len)\n    return buf\n  }\n\n  if (obj.length !== undefined) {\n    if (typeof obj.length !== 'number' || numberIsNaN(obj.length)) {\n      return createBuffer(0)\n    }\n    return fromArrayLike(obj)\n  }\n\n  if (obj.type === 'Buffer' && Array.isArray(obj.data)) {\n    return fromArrayLike(obj.data)\n  }\n}\n\nfunction checked (length) {\n  // Note: cannot use `length < K_MAX_LENGTH` here because that fails when\n  // length is NaN (which is otherwise coerced to zero.)\n  if (length >= K_MAX_LENGTH) {\n    throw new RangeError('Attempt to allocate Buffer larger than maximum ' +\n                         'size: 0x' + K_MAX_LENGTH.toString(16) + ' bytes')\n  }\n  return length | 0\n}\n\nfunction SlowBuffer (length) {\n  if (+length != length) { // eslint-disable-line eqeqeq\n    length = 0\n  }\n  return Buffer.alloc(+length)\n}\n\nBuffer.isBuffer = function isBuffer (b) {\n  return b != null && b._isBuffer === true &&\n    b !== Buffer.prototype // so Buffer.isBuffer(Buffer.prototype) will be false\n}\n\nBuffer.compare = function compare (a, b) {\n  if (isInstance(a, Uint8Array)) a = Buffer.from(a, a.offset, a.byteLength)\n  if (isInstance(b, Uint8Array)) b = Buffer.from(b, b.offset, b.byteLength)\n  if (!Buffer.isBuffer(a) || !Buffer.isBuffer(b)) {\n    throw new TypeError(\n      'The \"buf1\", \"buf2\" arguments must be one of type Buffer or Uint8Array'\n    )\n  }\n\n  if (a === b) return 0\n\n  let x = a.length\n  let y = b.length\n\n  for (let i = 0, len = Math.min(x, y); i < len; ++i) {\n    if (a[i] !== b[i]) {\n      x = a[i]\n      y = b[i]\n      break\n    }\n  }\n\n  if (x < y) return -1\n  if (y < x) return 1\n  return 0\n}\n\nBuffer.isEncoding = function isEncoding (encoding) {\n  switch (String(encoding).toLowerCase()) {\n    case 'hex':\n    case 'utf8':\n    case 'utf-8':\n    case 'ascii':\n    case 'latin1':\n    case 'binary':\n    case 'base64':\n    case 'ucs2':\n    case 'ucs-2':\n    case 'utf16le':\n    case 'utf-16le':\n      return true\n    default:\n      return false\n  }\n}\n\nBuffer.concat = function concat (list, length) {\n  if (!Array.isArray(list)) {\n    throw new TypeError('\"list\" argument must be an Array of Buffers')\n  }\n\n  if (list.length === 0) {\n    return Buffer.alloc(0)\n  }\n\n  let i\n  if (length === undefined) {\n    length = 0\n    for (i = 0; i < list.length; ++i) {\n      length += list[i].length\n    }\n  }\n\n  const buffer = Buffer.allocUnsafe(length)\n  let pos = 0\n  for (i = 0; i < list.length; ++i) {\n    let buf = list[i]\n    if (isInstance(buf, Uint8Array)) {\n      if (pos + buf.length > buffer.length) {\n        if (!Buffer.isBuffer(buf)) buf = Buffer.from(buf)\n        buf.copy(buffer, pos)\n      } else {\n        Uint8Array.prototype.set.call(\n          buffer,\n          buf,\n          pos\n        )\n      }\n    } else if (!Buffer.isBuffer(buf)) {\n      throw new TypeError('\"list\" argument must be an Array of Buffers')\n    } else {\n      buf.copy(buffer, pos)\n    }\n    pos += buf.length\n  }\n  return buffer\n}\n\nfunction byteLength (string, encoding) {\n  if (Buffer.isBuffer(string)) {\n    return string.length\n  }\n  if (ArrayBuffer.isView(string) || isInstance(string, ArrayBuffer)) {\n    return string.byteLength\n  }\n  if (typeof string !== 'string') {\n    throw new TypeError(\n      'The \"string\" argument must be one of type string, Buffer, or ArrayBuffer. ' +\n      'Received type ' + typeof string\n    )\n  }\n\n  const len = string.length\n  const mustMatch = (arguments.length > 2 && arguments[2] === true)\n  if (!mustMatch && len === 0) return 0\n\n  // Use a for loop to avoid recursion\n  let loweredCase = false\n  for (;;) {\n    switch (encoding) {\n      case 'ascii':\n      case 'latin1':\n      case 'binary':\n        return len\n      case 'utf8':\n      case 'utf-8':\n        return utf8ToBytes(string).length\n      case 'ucs2':\n      case 'ucs-2':\n      case 'utf16le':\n      case 'utf-16le':\n        return len * 2\n      case 'hex':\n        return len >>> 1\n      case 'base64':\n        return base64ToBytes(string).length\n      default:\n        if (loweredCase) {\n          return mustMatch ? -1 : utf8ToBytes(string).length // assume utf8\n        }\n        encoding = ('' + encoding).toLowerCase()\n        loweredCase = true\n    }\n  }\n}\nBuffer.byteLength = byteLength\n\nfunction slowToString (encoding, start, end) {\n  let loweredCase = false\n\n  // No need to verify that \"this.length <= MAX_UINT32\" since it's a read-only\n  // property of a typed array.\n\n  // This behaves neither like String nor Uint8Array in that we set start/end\n  // to their upper/lower bounds if the value passed is out of range.\n  // undefined is handled specially as per ECMA-262 6th Edition,\n  // Section 13.3.3.7 Runtime Semantics: KeyedBindingInitialization.\n  if (start === undefined || start < 0) {\n    start = 0\n  }\n  // Return early if start > this.length. Done here to prevent potential uint32\n  // coercion fail below.\n  if (start > this.length) {\n    return ''\n  }\n\n  if (end === undefined || end > this.length) {\n    end = this.length\n  }\n\n  if (end <= 0) {\n    return ''\n  }\n\n  // Force coercion to uint32. This will also coerce falsey/NaN values to 0.\n  end >>>= 0\n  start >>>= 0\n\n  if (end <= start) {\n    return ''\n  }\n\n  if (!encoding) encoding = 'utf8'\n\n  while (true) {\n    switch (encoding) {\n      case 'hex':\n        return hexSlice(this, start, end)\n\n      case 'utf8':\n      case 'utf-8':\n        return utf8Slice(this, start, end)\n\n      case 'ascii':\n        return asciiSlice(this, start, end)\n\n      case 'latin1':\n      case 'binary':\n        return latin1Slice(this, start, end)\n\n      case 'base64':\n        return base64Slice(this, start, end)\n\n      case 'ucs2':\n      case 'ucs-2':\n      case 'utf16le':\n      case 'utf-16le':\n        return utf16leSlice(this, start, end)\n\n      default:\n        if (loweredCase) throw new TypeError('Unknown encoding: ' + encoding)\n        encoding = (encoding + '').toLowerCase()\n        loweredCase = true\n    }\n  }\n}\n\n// This property is used by `Buffer.isBuffer` (and the `is-buffer` npm package)\n// to detect a Buffer instance. It's not possible to use `instanceof Buffer`\n// reliably in a browserify context because there could be multiple different\n// copies of the 'buffer' package in use. This method works even for Buffer\n// instances that were created from another copy of the `buffer` package.\n// See: https://github.com/feross/buffer/issues/154\nBuffer.prototype._isBuffer = true\n\nfunction swap (b, n, m) {\n  const i = b[n]\n  b[n] = b[m]\n  b[m] = i\n}\n\nBuffer.prototype.swap16 = function swap16 () {\n  const len = this.length\n  if (len % 2 !== 0) {\n    throw new RangeError('Buffer size must be a multiple of 16-bits')\n  }\n  for (let i = 0; i < len; i += 2) {\n    swap(this, i, i + 1)\n  }\n  return this\n}\n\nBuffer.prototype.swap32 = function swap32 () {\n  const len = this.length\n  if (len % 4 !== 0) {\n    throw new RangeError('Buffer size must be a multiple of 32-bits')\n  }\n  for (let i = 0; i < len; i += 4) {\n    swap(this, i, i + 3)\n    swap(this, i + 1, i + 2)\n  }\n  return this\n}\n\nBuffer.prototype.swap64 = function swap64 () {\n  const len = this.length\n  if (len % 8 !== 0) {\n    throw new RangeError('Buffer size must be a multiple of 64-bits')\n  }\n  for (let i = 0; i < len; i += 8) {\n    swap(this, i, i + 7)\n    swap(this, i + 1, i + 6)\n    swap(this, i + 2, i + 5)\n    swap(this, i + 3, i + 4)\n  }\n  return this\n}\n\nBuffer.prototype.toString = function toString () {\n  const length = this.length\n  if (length === 0) return ''\n  if (arguments.length === 0) return utf8Slice(this, 0, length)\n  return slowToString.apply(this, arguments)\n}\n\nBuffer.prototype.toLocaleString = Buffer.prototype.toString\n\nBuffer.prototype.equals = function equals (b) {\n  if (!Buffer.isBuffer(b)) throw new TypeError('Argument must be a Buffer')\n  if (this === b) return true\n  return Buffer.compare(this, b) === 0\n}\n\nBuffer.prototype.inspect = function inspect () {\n  let str = ''\n  const max = exports.INSPECT_MAX_BYTES\n  str = this.toString('hex', 0, max).replace(/(.{2})/g, '$1 ').trim()\n  if (this.length > max) str += ' ... '\n  return '<Buffer ' + str + '>'\n}\nif (customInspectSymbol) {\n  Buffer.prototype[customInspectSymbol] = Buffer.prototype.inspect\n}\n\nBuffer.prototype.compare = function compare (target, start, end, thisStart, thisEnd) {\n  if (isInstance(target, Uint8Array)) {\n    target = Buffer.from(target, target.offset, target.byteLength)\n  }\n  if (!Buffer.isBuffer(target)) {\n    throw new TypeError(\n      'The \"target\" argument must be one of type Buffer or Uint8Array. ' +\n      'Received type ' + (typeof target)\n    )\n  }\n\n  if (start === undefined) {\n    start = 0\n  }\n  if (end === undefined) {\n    end = target ? target.length : 0\n  }\n  if (thisStart === undefined) {\n    thisStart = 0\n  }\n  if (thisEnd === undefined) {\n    thisEnd = this.length\n  }\n\n  if (start < 0 || end > target.length || thisStart < 0 || thisEnd > this.length) {\n    throw new RangeError('out of range index')\n  }\n\n  if (thisStart >= thisEnd && start >= end) {\n    return 0\n  }\n  if (thisStart >= thisEnd) {\n    return -1\n  }\n  if (start >= end) {\n    return 1\n  }\n\n  start >>>= 0\n  end >>>= 0\n  thisStart >>>= 0\n  thisEnd >>>= 0\n\n  if (this === target) return 0\n\n  let x = thisEnd - thisStart\n  let y = end - start\n  const len = Math.min(x, y)\n\n  const thisCopy = this.slice(thisStart, thisEnd)\n  const targetCopy = target.slice(start, end)\n\n  for (let i = 0; i < len; ++i) {\n    if (thisCopy[i] !== targetCopy[i]) {\n      x = thisCopy[i]\n      y = targetCopy[i]\n      break\n    }\n  }\n\n  if (x < y) return -1\n  if (y < x) return 1\n  return 0\n}\n\n// Finds either the first index of `val` in `buffer` at offset >= `byteOffset`,\n// OR the last index of `val` in `buffer` at offset <= `byteOffset`.\n//\n// Arguments:\n// - buffer - a Buffer to search\n// - val - a string, Buffer, or number\n// - byteOffset - an index into `buffer`; will be clamped to an int32\n// - encoding - an optional encoding, relevant is val is a string\n// - dir - true for indexOf, false for lastIndexOf\nfunction bidirectionalIndexOf (buffer, val, byteOffset, encoding, dir) {\n  // Empty buffer means no match\n  if (buffer.length === 0) return -1\n\n  // Normalize byteOffset\n  if (typeof byteOffset === 'string') {\n    encoding = byteOffset\n    byteOffset = 0\n  } else if (byteOffset > 0x7fffffff) {\n    byteOffset = 0x7fffffff\n  } else if (byteOffset < -0x80000000) {\n    byteOffset = -0x80000000\n  }\n  byteOffset = +byteOffset // Coerce to Number.\n  if (numberIsNaN(byteOffset)) {\n    // byteOffset: it it's undefined, null, NaN, \"foo\", etc, search whole buffer\n    byteOffset = dir ? 0 : (buffer.length - 1)\n  }\n\n  // Normalize byteOffset: negative offsets start from the end of the buffer\n  if (byteOffset < 0) byteOffset = buffer.length + byteOffset\n  if (byteOffset >= buffer.length) {\n    if (dir) return -1\n    else byteOffset = buffer.length - 1\n  } else if (byteOffset < 0) {\n    if (dir) byteOffset = 0\n    else return -1\n  }\n\n  // Normalize val\n  if (typeof val === 'string') {\n    val = Buffer.from(val, encoding)\n  }\n\n  // Finally, search either indexOf (if dir is true) or lastIndexOf\n  if (Buffer.isBuffer(val)) {\n    // Special case: looking for empty string/buffer always fails\n    if (val.length === 0) {\n      return -1\n    }\n    return arrayIndexOf(buffer, val, byteOffset, encoding, dir)\n  } else if (typeof val === 'number') {\n    val = val & 0xFF // Search for a byte value [0-255]\n    if (typeof Uint8Array.prototype.indexOf === 'function') {\n      if (dir) {\n        return Uint8Array.prototype.indexOf.call(buffer, val, byteOffset)\n      } else {\n        return Uint8Array.prototype.lastIndexOf.call(buffer, val, byteOffset)\n      }\n    }\n    return arrayIndexOf(buffer, [val], byteOffset, encoding, dir)\n  }\n\n  throw new TypeError('val must be string, number or Buffer')\n}\n\nfunction arrayIndexOf (arr, val, byteOffset, encoding, dir) {\n  let indexSize = 1\n  let arrLength = arr.length\n  let valLength = val.length\n\n  if (encoding !== undefined) {\n    encoding = String(encoding).toLowerCase()\n    if (encoding === 'ucs2' || encoding === 'ucs-2' ||\n        encoding === 'utf16le' || encoding === 'utf-16le') {\n      if (arr.length < 2 || val.length < 2) {\n        return -1\n      }\n      indexSize = 2\n      arrLength /= 2\n      valLength /= 2\n      byteOffset /= 2\n    }\n  }\n\n  function read (buf, i) {\n    if (indexSize === 1) {\n      return buf[i]\n    } else {\n      return buf.readUInt16BE(i * indexSize)\n    }\n  }\n\n  let i\n  if (dir) {\n    let foundIndex = -1\n    for (i = byteOffset; i < arrLength; i++) {\n      if (read(arr, i) === read(val, foundIndex === -1 ? 0 : i - foundIndex)) {\n        if (foundIndex === -1) foundIndex = i\n        if (i - foundIndex + 1 === valLength) return foundIndex * indexSize\n      } else {\n        if (foundIndex !== -1) i -= i - foundIndex\n        foundIndex = -1\n      }\n    }\n  } else {\n    if (byteOffset + valLength > arrLength) byteOffset = arrLength - valLength\n    for (i = byteOffset; i >= 0; i--) {\n      let found = true\n      for (let j = 0; j < valLength; j++) {\n        if (read(arr, i + j) !== read(val, j)) {\n          found = false\n          break\n        }\n      }\n      if (found) return i\n    }\n  }\n\n  return -1\n}\n\nBuffer.prototype.includes = function includes (val, byteOffset, encoding) {\n  return this.indexOf(val, byteOffset, encoding) !== -1\n}\n\nBuffer.prototype.indexOf = function indexOf (val, byteOffset, encoding) {\n  return bidirectionalIndexOf(this, val, byteOffset, encoding, true)\n}\n\nBuffer.prototype.lastIndexOf = function lastIndexOf (val, byteOffset, encoding) {\n  return bidirectionalIndexOf(this, val, byteOffset, encoding, false)\n}\n\nfunction hexWrite (buf, string, offset, length) {\n  offset = Number(offset) || 0\n  const remaining = buf.length - offset\n  if (!length) {\n    length = remaining\n  } else {\n    length = Number(length)\n    if (length > remaining) {\n      length = remaining\n    }\n  }\n\n  const strLen = string.length\n\n  if (length > strLen / 2) {\n    length = strLen / 2\n  }\n  let i\n  for (i = 0; i < length; ++i) {\n    const parsed = parseInt(string.substr(i * 2, 2), 16)\n    if (numberIsNaN(parsed)) return i\n    buf[offset + i] = parsed\n  }\n  return i\n}\n\nfunction utf8Write (buf, string, offset, length) {\n  return blitBuffer(utf8ToBytes(string, buf.length - offset), buf, offset, length)\n}\n\nfunction asciiWrite (buf, string, offset, length) {\n  return blitBuffer(asciiToBytes(string), buf, offset, length)\n}\n\nfunction base64Write (buf, string, offset, length) {\n  return blitBuffer(base64ToBytes(string), buf, offset, length)\n}\n\nfunction ucs2Write (buf, string, offset, length) {\n  return blitBuffer(utf16leToBytes(string, buf.length - offset), buf, offset, length)\n}\n\nBuffer.prototype.write = function write (string, offset, length, encoding) {\n  // Buffer#write(string)\n  if (offset === undefined) {\n    encoding = 'utf8'\n    length = this.length\n    offset = 0\n  // Buffer#write(string, encoding)\n  } else if (length === undefined && typeof offset === 'string') {\n    encoding = offset\n    length = this.length\n    offset = 0\n  // Buffer#write(string, offset[, length][, encoding])\n  } else if (isFinite(offset)) {\n    offset = offset >>> 0\n    if (isFinite(length)) {\n      length = length >>> 0\n      if (encoding === undefined) encoding = 'utf8'\n    } else {\n      encoding = length\n      length = undefined\n    }\n  } else {\n    throw new Error(\n      'Buffer.write(string, encoding, offset[, length]) is no longer supported'\n    )\n  }\n\n  const remaining = this.length - offset\n  if (length === undefined || length > remaining) length = remaining\n\n  if ((string.length > 0 && (length < 0 || offset < 0)) || offset > this.length) {\n    throw new RangeError('Attempt to write outside buffer bounds')\n  }\n\n  if (!encoding) encoding = 'utf8'\n\n  let loweredCase = false\n  for (;;) {\n    switch (encoding) {\n      case 'hex':\n        return hexWrite(this, string, offset, length)\n\n      case 'utf8':\n      case 'utf-8':\n        return utf8Write(this, string, offset, length)\n\n      case 'ascii':\n      case 'latin1':\n      case 'binary':\n        return asciiWrite(this, string, offset, length)\n\n      case 'base64':\n        // Warning: maxLength not taken into account in base64Write\n        return base64Write(this, string, offset, length)\n\n      case 'ucs2':\n      case 'ucs-2':\n      case 'utf16le':\n      case 'utf-16le':\n        return ucs2Write(this, string, offset, length)\n\n      default:\n        if (loweredCase) throw new TypeError('Unknown encoding: ' + encoding)\n        encoding = ('' + encoding).toLowerCase()\n        loweredCase = true\n    }\n  }\n}\n\nBuffer.prototype.toJSON = function toJSON () {\n  return {\n    type: 'Buffer',\n    data: Array.prototype.slice.call(this._arr || this, 0)\n  }\n}\n\nfunction base64Slice (buf, start, end) {\n  if (start === 0 && end === buf.length) {\n    return base64.fromByteArray(buf)\n  } else {\n    return base64.fromByteArray(buf.slice(start, end))\n  }\n}\n\nfunction utf8Slice (buf, start, end) {\n  end = Math.min(buf.length, end)\n  const res = []\n\n  let i = start\n  while (i < end) {\n    const firstByte = buf[i]\n    let codePoint = null\n    let bytesPerSequence = (firstByte > 0xEF)\n      ? 4\n      : (firstByte > 0xDF)\n          ? 3\n          : (firstByte > 0xBF)\n              ? 2\n              : 1\n\n    if (i + bytesPerSequence <= end) {\n      let secondByte, thirdByte, fourthByte, tempCodePoint\n\n      switch (bytesPerSequence) {\n        case 1:\n          if (firstByte < 0x80) {\n            codePoint = firstByte\n          }\n          break\n        case 2:\n          secondByte = buf[i + 1]\n          if ((secondByte & 0xC0) === 0x80) {\n            tempCodePoint = (firstByte & 0x1F) << 0x6 | (secondByte & 0x3F)\n            if (tempCodePoint > 0x7F) {\n              codePoint = tempCodePoint\n            }\n          }\n          break\n        case 3:\n          secondByte = buf[i + 1]\n          thirdByte = buf[i + 2]\n          if ((secondByte & 0xC0) === 0x80 && (thirdByte & 0xC0) === 0x80) {\n            tempCodePoint = (firstByte & 0xF) << 0xC | (secondByte & 0x3F) << 0x6 | (thirdByte & 0x3F)\n            if (tempCodePoint > 0x7FF && (tempCodePoint < 0xD800 || tempCodePoint > 0xDFFF)) {\n              codePoint = tempCodePoint\n            }\n          }\n          break\n        case 4:\n          secondByte = buf[i + 1]\n          thirdByte = buf[i + 2]\n          fourthByte = buf[i + 3]\n          if ((secondByte & 0xC0) === 0x80 && (thirdByte & 0xC0) === 0x80 && (fourthByte & 0xC0) === 0x80) {\n            tempCodePoint = (firstByte & 0xF) << 0x12 | (secondByte & 0x3F) << 0xC | (thirdByte & 0x3F) << 0x6 | (fourthByte & 0x3F)\n            if (tempCodePoint > 0xFFFF && tempCodePoint < 0x110000) {\n              codePoint = tempCodePoint\n            }\n          }\n      }\n    }\n\n    if (codePoint === null) {\n      // we did not generate a valid codePoint so insert a\n      // replacement char (U+FFFD) and advance only 1 byte\n      codePoint = 0xFFFD\n      bytesPerSequence = 1\n    } else if (codePoint > 0xFFFF) {\n      // encode to utf16 (surrogate pair dance)\n      codePoint -= 0x10000\n      res.push(codePoint >>> 10 & 0x3FF | 0xD800)\n      codePoint = 0xDC00 | codePoint & 0x3FF\n    }\n\n    res.push(codePoint)\n    i += bytesPerSequence\n  }\n\n  return decodeCodePointsArray(res)\n}\n\n// Based on http://stackoverflow.com/a/22747272/680742, the browser with\n// the lowest limit is Chrome, with 0x10000 args.\n// We go 1 magnitude less, for safety\nconst MAX_ARGUMENTS_LENGTH = 0x1000\n\nfunction decodeCodePointsArray (codePoints) {\n  const len = codePoints.length\n  if (len <= MAX_ARGUMENTS_LENGTH) {\n    return String.fromCharCode.apply(String, codePoints) // avoid extra slice()\n  }\n\n  // Decode in chunks to avoid \"call stack size exceeded\".\n  let res = ''\n  let i = 0\n  while (i < len) {\n    res += String.fromCharCode.apply(\n      String,\n      codePoints.slice(i, i += MAX_ARGUMENTS_LENGTH)\n    )\n  }\n  return res\n}\n\nfunction asciiSlice (buf, start, end) {\n  let ret = ''\n  end = Math.min(buf.length, end)\n\n  for (let i = start; i < end; ++i) {\n    ret += String.fromCharCode(buf[i] & 0x7F)\n  }\n  return ret\n}\n\nfunction latin1Slice (buf, start, end) {\n  let ret = ''\n  end = Math.min(buf.length, end)\n\n  for (let i = start; i < end; ++i) {\n    ret += String.fromCharCode(buf[i])\n  }\n  return ret\n}\n\nfunction hexSlice (buf, start, end) {\n  const len = buf.length\n\n  if (!start || start < 0) start = 0\n  if (!end || end < 0 || end > len) end = len\n\n  let out = ''\n  for (let i = start; i < end; ++i) {\n    out += hexSliceLookupTable[buf[i]]\n  }\n  return out\n}\n\nfunction utf16leSlice (buf, start, end) {\n  const bytes = buf.slice(start, end)\n  let res = ''\n  // If bytes.length is odd, the last 8 bits must be ignored (same as node.js)\n  for (let i = 0; i < bytes.length - 1; i += 2) {\n    res += String.fromCharCode(bytes[i] + (bytes[i + 1] * 256))\n  }\n  return res\n}\n\nBuffer.prototype.slice = function slice (start, end) {\n  const len = this.length\n  start = ~~start\n  end = end === undefined ? len : ~~end\n\n  if (start < 0) {\n    start += len\n    if (start < 0) start = 0\n  } else if (start > len) {\n    start = len\n  }\n\n  if (end < 0) {\n    end += len\n    if (end < 0) end = 0\n  } else if (end > len) {\n    end = len\n  }\n\n  if (end < start) end = start\n\n  const newBuf = this.subarray(start, end)\n  // Return an augmented `Uint8Array` instance\n  Object.setPrototypeOf(newBuf, Buffer.prototype)\n\n  return newBuf\n}\n\n/*\n * Need to make sure that buffer isn't trying to write out of bounds.\n */\nfunction checkOffset (offset, ext, length) {\n  if ((offset % 1) !== 0 || offset < 0) throw new RangeError('offset is not uint')\n  if (offset + ext > length) throw new RangeError('Trying to access beyond buffer length')\n}\n\nBuffer.prototype.readUintLE =\nBuffer.prototype.readUIntLE = function readUIntLE (offset, byteLength, noAssert) {\n  offset = offset >>> 0\n  byteLength = byteLength >>> 0\n  if (!noAssert) checkOffset(offset, byteLength, this.length)\n\n  let val = this[offset]\n  let mul = 1\n  let i = 0\n  while (++i < byteLength && (mul *= 0x100)) {\n    val += this[offset + i] * mul\n  }\n\n  return val\n}\n\nBuffer.prototype.readUintBE =\nBuffer.prototype.readUIntBE = function readUIntBE (offset, byteLength, noAssert) {\n  offset = offset >>> 0\n  byteLength = byteLength >>> 0\n  if (!noAssert) {\n    checkOffset(offset, byteLength, this.length)\n  }\n\n  let val = this[offset + --byteLength]\n  let mul = 1\n  while (byteLength > 0 && (mul *= 0x100)) {\n    val += this[offset + --byteLength] * mul\n  }\n\n  return val\n}\n\nBuffer.prototype.readUint8 =\nBuffer.prototype.readUInt8 = function readUInt8 (offset, noAssert) {\n  offset = offset >>> 0\n  if (!noAssert) checkOffset(offset, 1, this.length)\n  return this[offset]\n}\n\nBuffer.prototype.readUint16LE =\nBuffer.prototype.readUInt16LE = function readUInt16LE (offset, noAssert) {\n  offset = offset >>> 0\n  if (!noAssert) checkOffset(offset, 2, this.length)\n  return this[offset] | (this[offset + 1] << 8)\n}\n\nBuffer.prototype.readUint16BE =\nBuffer.prototype.readUInt16BE = function readUInt16BE (offset, noAssert) {\n  offset = offset >>> 0\n  if (!noAssert) checkOffset(offset, 2, this.length)\n  return (this[offset] << 8) | this[offset + 1]\n}\n\nBuffer.prototype.readUint32LE =\nBuffer.prototype.readUInt32LE = function readUInt32LE (offset, noAssert) {\n  offset = offset >>> 0\n  if (!noAssert) checkOffset(offset, 4, this.length)\n\n  return ((this[offset]) |\n      (this[offset + 1] << 8) |\n      (this[offset + 2] << 16)) +\n      (this[offset + 3] * 0x1000000)\n}\n\nBuffer.prototype.readUint32BE =\nBuffer.prototype.readUInt32BE = function readUInt32BE (offset, noAssert) {\n  offset = offset >>> 0\n  if (!noAssert) checkOffset(offset, 4, this.length)\n\n  return (this[offset] * 0x1000000) +\n    ((this[offset + 1] << 16) |\n    (this[offset + 2] << 8) |\n    this[offset + 3])\n}\n\nBuffer.prototype.readBigUInt64LE = defineBigIntMethod(function readBigUInt64LE (offset) {\n  offset = offset >>> 0\n  validateNumber(offset, 'offset')\n  const first = this[offset]\n  const last = this[offset + 7]\n  if (first === undefined || last === undefined) {\n    boundsError(offset, this.length - 8)\n  }\n\n  const lo = first +\n    this[++offset] * 2 ** 8 +\n    this[++offset] * 2 ** 16 +\n    this[++offset] * 2 ** 24\n\n  const hi = this[++offset] +\n    this[++offset] * 2 ** 8 +\n    this[++offset] * 2 ** 16 +\n    last * 2 ** 24\n\n  return BigInt(lo) + (BigInt(hi) << BigInt(32))\n})\n\nBuffer.prototype.readBigUInt64BE = defineBigIntMethod(function readBigUInt64BE (offset) {\n  offset = offset >>> 0\n  validateNumber(offset, 'offset')\n  const first = this[offset]\n  const last = this[offset + 7]\n  if (first === undefined || last === undefined) {\n    boundsError(offset, this.length - 8)\n  }\n\n  const hi = first * 2 ** 24 +\n    this[++offset] * 2 ** 16 +\n    this[++offset] * 2 ** 8 +\n    this[++offset]\n\n  const lo = this[++offset] * 2 ** 24 +\n    this[++offset] * 2 ** 16 +\n    this[++offset] * 2 ** 8 +\n    last\n\n  return (BigInt(hi) << BigInt(32)) + BigInt(lo)\n})\n\nBuffer.prototype.readIntLE = function readIntLE (offset, byteLength, noAssert) {\n  offset = offset >>> 0\n  byteLength = byteLength >>> 0\n  if (!noAssert) checkOffset(offset, byteLength, this.length)\n\n  let val = this[offset]\n  let mul = 1\n  let i = 0\n  while (++i < byteLength && (mul *= 0x100)) {\n    val += this[offset + i] * mul\n  }\n  mul *= 0x80\n\n  if (val >= mul) val -= Math.pow(2, 8 * byteLength)\n\n  return val\n}\n\nBuffer.prototype.readIntBE = function readIntBE (offset, byteLength, noAssert) {\n  offset = offset >>> 0\n  byteLength = byteLength >>> 0\n  if (!noAssert) checkOffset(offset, byteLength, this.length)\n\n  let i = byteLength\n  let mul = 1\n  let val = this[offset + --i]\n  while (i > 0 && (mul *= 0x100)) {\n    val += this[offset + --i] * mul\n  }\n  mul *= 0x80\n\n  if (val >= mul) val -= Math.pow(2, 8 * byteLength)\n\n  return val\n}\n\nBuffer.prototype.readInt8 = function readInt8 (offset, noAssert) {\n  offset = offset >>> 0\n  if (!noAssert) checkOffset(offset, 1, this.length)\n  if (!(this[offset] & 0x80)) return (this[offset])\n  return ((0xff - this[offset] + 1) * -1)\n}\n\nBuffer.prototype.readInt16LE = function readInt16LE (offset, noAssert) {\n  offset = offset >>> 0\n  if (!noAssert) checkOffset(offset, 2, this.length)\n  const val = this[offset] | (this[offset + 1] << 8)\n  return (val & 0x8000) ? val | 0xFFFF0000 : val\n}\n\nBuffer.prototype.readInt16BE = function readInt16BE (offset, noAssert) {\n  offset = offset >>> 0\n  if (!noAssert) checkOffset(offset, 2, this.length)\n  const val = this[offset + 1] | (this[offset] << 8)\n  return (val & 0x8000) ? val | 0xFFFF0000 : val\n}\n\nBuffer.prototype.readInt32LE = function readInt32LE (offset, noAssert) {\n  offset = offset >>> 0\n  if (!noAssert) checkOffset(offset, 4, this.length)\n\n  return (this[offset]) |\n    (this[offset + 1] << 8) |\n    (this[offset + 2] << 16) |\n    (this[offset + 3] << 24)\n}\n\nBuffer.prototype.readInt32BE = function readInt32BE (offset, noAssert) {\n  offset = offset >>> 0\n  if (!noAssert) checkOffset(offset, 4, this.length)\n\n  return (this[offset] << 24) |\n    (this[offset + 1] << 16) |\n    (this[offset + 2] << 8) |\n    (this[offset + 3])\n}\n\nBuffer.prototype.readBigInt64LE = defineBigIntMethod(function readBigInt64LE (offset) {\n  offset = offset >>> 0\n  validateNumber(offset, 'offset')\n  const first = this[offset]\n  const last = this[offset + 7]\n  if (first === undefined || last === undefined) {\n    boundsError(offset, this.length - 8)\n  }\n\n  const val = this[offset + 4] +\n    this[offset + 5] * 2 ** 8 +\n    this[offset + 6] * 2 ** 16 +\n    (last << 24) // Overflow\n\n  return (BigInt(val) << BigInt(32)) +\n    BigInt(first +\n    this[++offset] * 2 ** 8 +\n    this[++offset] * 2 ** 16 +\n    this[++offset] * 2 ** 24)\n})\n\nBuffer.prototype.readBigInt64BE = defineBigIntMethod(function readBigInt64BE (offset) {\n  offset = offset >>> 0\n  validateNumber(offset, 'offset')\n  const first = this[offset]\n  const last = this[offset + 7]\n  if (first === undefined || last === undefined) {\n    boundsError(offset, this.length - 8)\n  }\n\n  const val = (first << 24) + // Overflow\n    this[++offset] * 2 ** 16 +\n    this[++offset] * 2 ** 8 +\n    this[++offset]\n\n  return (BigInt(val) << BigInt(32)) +\n    BigInt(this[++offset] * 2 ** 24 +\n    this[++offset] * 2 ** 16 +\n    this[++offset] * 2 ** 8 +\n    last)\n})\n\nBuffer.prototype.readFloatLE = function readFloatLE (offset, noAssert) {\n  offset = offset >>> 0\n  if (!noAssert) checkOffset(offset, 4, this.length)\n  return ieee754.read(this, offset, true, 23, 4)\n}\n\nBuffer.prototype.readFloatBE = function readFloatBE (offset, noAssert) {\n  offset = offset >>> 0\n  if (!noAssert) checkOffset(offset, 4, this.length)\n  return ieee754.read(this, offset, false, 23, 4)\n}\n\nBuffer.prototype.readDoubleLE = function readDoubleLE (offset, noAssert) {\n  offset = offset >>> 0\n  if (!noAssert) checkOffset(offset, 8, this.length)\n  return ieee754.read(this, offset, true, 52, 8)\n}\n\nBuffer.prototype.readDoubleBE = function readDoubleBE (offset, noAssert) {\n  offset = offset >>> 0\n  if (!noAssert) checkOffset(offset, 8, this.length)\n  return ieee754.read(this, offset, false, 52, 8)\n}\n\nfunction checkInt (buf, value, offset, ext, max, min) {\n  if (!Buffer.isBuffer(buf)) throw new TypeError('\"buffer\" argument must be a Buffer instance')\n  if (value > max || value < min) throw new RangeError('\"value\" argument is out of bounds')\n  if (offset + ext > buf.length) throw new RangeError('Index out of range')\n}\n\nBuffer.prototype.writeUintLE =\nBuffer.prototype.writeUIntLE = function writeUIntLE (value, offset, byteLength, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  byteLength = byteLength >>> 0\n  if (!noAssert) {\n    const maxBytes = Math.pow(2, 8 * byteLength) - 1\n    checkInt(this, value, offset, byteLength, maxBytes, 0)\n  }\n\n  let mul = 1\n  let i = 0\n  this[offset] = value & 0xFF\n  while (++i < byteLength && (mul *= 0x100)) {\n    this[offset + i] = (value / mul) & 0xFF\n  }\n\n  return offset + byteLength\n}\n\nBuffer.prototype.writeUintBE =\nBuffer.prototype.writeUIntBE = function writeUIntBE (value, offset, byteLength, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  byteLength = byteLength >>> 0\n  if (!noAssert) {\n    const maxBytes = Math.pow(2, 8 * byteLength) - 1\n    checkInt(this, value, offset, byteLength, maxBytes, 0)\n  }\n\n  let i = byteLength - 1\n  let mul = 1\n  this[offset + i] = value & 0xFF\n  while (--i >= 0 && (mul *= 0x100)) {\n    this[offset + i] = (value / mul) & 0xFF\n  }\n\n  return offset + byteLength\n}\n\nBuffer.prototype.writeUint8 =\nBuffer.prototype.writeUInt8 = function writeUInt8 (value, offset, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  if (!noAssert) checkInt(this, value, offset, 1, 0xff, 0)\n  this[offset] = (value & 0xff)\n  return offset + 1\n}\n\nBuffer.prototype.writeUint16LE =\nBuffer.prototype.writeUInt16LE = function writeUInt16LE (value, offset, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  if (!noAssert) checkInt(this, value, offset, 2, 0xffff, 0)\n  this[offset] = (value & 0xff)\n  this[offset + 1] = (value >>> 8)\n  return offset + 2\n}\n\nBuffer.prototype.writeUint16BE =\nBuffer.prototype.writeUInt16BE = function writeUInt16BE (value, offset, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  if (!noAssert) checkInt(this, value, offset, 2, 0xffff, 0)\n  this[offset] = (value >>> 8)\n  this[offset + 1] = (value & 0xff)\n  return offset + 2\n}\n\nBuffer.prototype.writeUint32LE =\nBuffer.prototype.writeUInt32LE = function writeUInt32LE (value, offset, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  if (!noAssert) checkInt(this, value, offset, 4, 0xffffffff, 0)\n  this[offset + 3] = (value >>> 24)\n  this[offset + 2] = (value >>> 16)\n  this[offset + 1] = (value >>> 8)\n  this[offset] = (value & 0xff)\n  return offset + 4\n}\n\nBuffer.prototype.writeUint32BE =\nBuffer.prototype.writeUInt32BE = function writeUInt32BE (value, offset, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  if (!noAssert) checkInt(this, value, offset, 4, 0xffffffff, 0)\n  this[offset] = (value >>> 24)\n  this[offset + 1] = (value >>> 16)\n  this[offset + 2] = (value >>> 8)\n  this[offset + 3] = (value & 0xff)\n  return offset + 4\n}\n\nfunction wrtBigUInt64LE (buf, value, offset, min, max) {\n  checkIntBI(value, min, max, buf, offset, 7)\n\n  let lo = Number(value & BigInt(0xffffffff))\n  buf[offset++] = lo\n  lo = lo >> 8\n  buf[offset++] = lo\n  lo = lo >> 8\n  buf[offset++] = lo\n  lo = lo >> 8\n  buf[offset++] = lo\n  let hi = Number(value >> BigInt(32) & BigInt(0xffffffff))\n  buf[offset++] = hi\n  hi = hi >> 8\n  buf[offset++] = hi\n  hi = hi >> 8\n  buf[offset++] = hi\n  hi = hi >> 8\n  buf[offset++] = hi\n  return offset\n}\n\nfunction wrtBigUInt64BE (buf, value, offset, min, max) {\n  checkIntBI(value, min, max, buf, offset, 7)\n\n  let lo = Number(value & BigInt(0xffffffff))\n  buf[offset + 7] = lo\n  lo = lo >> 8\n  buf[offset + 6] = lo\n  lo = lo >> 8\n  buf[offset + 5] = lo\n  lo = lo >> 8\n  buf[offset + 4] = lo\n  let hi = Number(value >> BigInt(32) & BigInt(0xffffffff))\n  buf[offset + 3] = hi\n  hi = hi >> 8\n  buf[offset + 2] = hi\n  hi = hi >> 8\n  buf[offset + 1] = hi\n  hi = hi >> 8\n  buf[offset] = hi\n  return offset + 8\n}\n\nBuffer.prototype.writeBigUInt64LE = defineBigIntMethod(function writeBigUInt64LE (value, offset = 0) {\n  return wrtBigUInt64LE(this, value, offset, BigInt(0), BigInt('0xffffffffffffffff'))\n})\n\nBuffer.prototype.writeBigUInt64BE = defineBigIntMethod(function writeBigUInt64BE (value, offset = 0) {\n  return wrtBigUInt64BE(this, value, offset, BigInt(0), BigInt('0xffffffffffffffff'))\n})\n\nBuffer.prototype.writeIntLE = function writeIntLE (value, offset, byteLength, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  if (!noAssert) {\n    const limit = Math.pow(2, (8 * byteLength) - 1)\n\n    checkInt(this, value, offset, byteLength, limit - 1, -limit)\n  }\n\n  let i = 0\n  let mul = 1\n  let sub = 0\n  this[offset] = value & 0xFF\n  while (++i < byteLength && (mul *= 0x100)) {\n    if (value < 0 && sub === 0 && this[offset + i - 1] !== 0) {\n      sub = 1\n    }\n    this[offset + i] = ((value / mul) >> 0) - sub & 0xFF\n  }\n\n  return offset + byteLength\n}\n\nBuffer.prototype.writeIntBE = function writeIntBE (value, offset, byteLength, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  if (!noAssert) {\n    const limit = Math.pow(2, (8 * byteLength) - 1)\n\n    checkInt(this, value, offset, byteLength, limit - 1, -limit)\n  }\n\n  let i = byteLength - 1\n  let mul = 1\n  let sub = 0\n  this[offset + i] = value & 0xFF\n  while (--i >= 0 && (mul *= 0x100)) {\n    if (value < 0 && sub === 0 && this[offset + i + 1] !== 0) {\n      sub = 1\n    }\n    this[offset + i] = ((value / mul) >> 0) - sub & 0xFF\n  }\n\n  return offset + byteLength\n}\n\nBuffer.prototype.writeInt8 = function writeInt8 (value, offset, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  if (!noAssert) checkInt(this, value, offset, 1, 0x7f, -0x80)\n  if (value < 0) value = 0xff + value + 1\n  this[offset] = (value & 0xff)\n  return offset + 1\n}\n\nBuffer.prototype.writeInt16LE = function writeInt16LE (value, offset, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  if (!noAssert) checkInt(this, value, offset, 2, 0x7fff, -0x8000)\n  this[offset] = (value & 0xff)\n  this[offset + 1] = (value >>> 8)\n  return offset + 2\n}\n\nBuffer.prototype.writeInt16BE = function writeInt16BE (value, offset, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  if (!noAssert) checkInt(this, value, offset, 2, 0x7fff, -0x8000)\n  this[offset] = (value >>> 8)\n  this[offset + 1] = (value & 0xff)\n  return offset + 2\n}\n\nBuffer.prototype.writeInt32LE = function writeInt32LE (value, offset, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  if (!noAssert) checkInt(this, value, offset, 4, 0x7fffffff, -0x80000000)\n  this[offset] = (value & 0xff)\n  this[offset + 1] = (value >>> 8)\n  this[offset + 2] = (value >>> 16)\n  this[offset + 3] = (value >>> 24)\n  return offset + 4\n}\n\nBuffer.prototype.writeInt32BE = function writeInt32BE (value, offset, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  if (!noAssert) checkInt(this, value, offset, 4, 0x7fffffff, -0x80000000)\n  if (value < 0) value = 0xffffffff + value + 1\n  this[offset] = (value >>> 24)\n  this[offset + 1] = (value >>> 16)\n  this[offset + 2] = (value >>> 8)\n  this[offset + 3] = (value & 0xff)\n  return offset + 4\n}\n\nBuffer.prototype.writeBigInt64LE = defineBigIntMethod(function writeBigInt64LE (value, offset = 0) {\n  return wrtBigUInt64LE(this, value, offset, -BigInt('0x8000000000000000'), BigInt('0x7fffffffffffffff'))\n})\n\nBuffer.prototype.writeBigInt64BE = defineBigIntMethod(function writeBigInt64BE (value, offset = 0) {\n  return wrtBigUInt64BE(this, value, offset, -BigInt('0x8000000000000000'), BigInt('0x7fffffffffffffff'))\n})\n\nfunction checkIEEE754 (buf, value, offset, ext, max, min) {\n  if (offset + ext > buf.length) throw new RangeError('Index out of range')\n  if (offset < 0) throw new RangeError('Index out of range')\n}\n\nfunction writeFloat (buf, value, offset, littleEndian, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  if (!noAssert) {\n    checkIEEE754(buf, value, offset, 4, 3.4028234663852886e+38, -3.4028234663852886e+38)\n  }\n  ieee754.write(buf, value, offset, littleEndian, 23, 4)\n  return offset + 4\n}\n\nBuffer.prototype.writeFloatLE = function writeFloatLE (value, offset, noAssert) {\n  return writeFloat(this, value, offset, true, noAssert)\n}\n\nBuffer.prototype.writeFloatBE = function writeFloatBE (value, offset, noAssert) {\n  return writeFloat(this, value, offset, false, noAssert)\n}\n\nfunction writeDouble (buf, value, offset, littleEndian, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  if (!noAssert) {\n    checkIEEE754(buf, value, offset, 8, 1.7976931348623157E+308, -1.7976931348623157E+308)\n  }\n  ieee754.write(buf, value, offset, littleEndian, 52, 8)\n  return offset + 8\n}\n\nBuffer.prototype.writeDoubleLE = function writeDoubleLE (value, offset, noAssert) {\n  return writeDouble(this, value, offset, true, noAssert)\n}\n\nBuffer.prototype.writeDoubleBE = function writeDoubleBE (value, offset, noAssert) {\n  return writeDouble(this, value, offset, false, noAssert)\n}\n\n// copy(targetBuffer, targetStart=0, sourceStart=0, sourceEnd=buffer.length)\nBuffer.prototype.copy = function copy (target, targetStart, start, end) {\n  if (!Buffer.isBuffer(target)) throw new TypeError('argument should be a Buffer')\n  if (!start) start = 0\n  if (!end && end !== 0) end = this.length\n  if (targetStart >= target.length) targetStart = target.length\n  if (!targetStart) targetStart = 0\n  if (end > 0 && end < start) end = start\n\n  // Copy 0 bytes; we're done\n  if (end === start) return 0\n  if (target.length === 0 || this.length === 0) return 0\n\n  // Fatal error conditions\n  if (targetStart < 0) {\n    throw new RangeError('targetStart out of bounds')\n  }\n  if (start < 0 || start >= this.length) throw new RangeError('Index out of range')\n  if (end < 0) throw new RangeError('sourceEnd out of bounds')\n\n  // Are we oob?\n  if (end > this.length) end = this.length\n  if (target.length - targetStart < end - start) {\n    end = target.length - targetStart + start\n  }\n\n  const len = end - start\n\n  if (this === target && typeof Uint8Array.prototype.copyWithin === 'function') {\n    // Use built-in when available, missing from IE11\n    this.copyWithin(targetStart, start, end)\n  } else {\n    Uint8Array.prototype.set.call(\n      target,\n      this.subarray(start, end),\n      targetStart\n    )\n  }\n\n  return len\n}\n\n// Usage:\n//    buffer.fill(number[, offset[, end]])\n//    buffer.fill(buffer[, offset[, end]])\n//    buffer.fill(string[, offset[, end]][, encoding])\nBuffer.prototype.fill = function fill (val, start, end, encoding) {\n  // Handle string cases:\n  if (typeof val === 'string') {\n    if (typeof start === 'string') {\n      encoding = start\n      start = 0\n      end = this.length\n    } else if (typeof end === 'string') {\n      encoding = end\n      end = this.length\n    }\n    if (encoding !== undefined && typeof encoding !== 'string') {\n      throw new TypeError('encoding must be a string')\n    }\n    if (typeof encoding === 'string' && !Buffer.isEncoding(encoding)) {\n      throw new TypeError('Unknown encoding: ' + encoding)\n    }\n    if (val.length === 1) {\n      const code = val.charCodeAt(0)\n      if ((encoding === 'utf8' && code < 128) ||\n          encoding === 'latin1') {\n        // Fast path: If `val` fits into a single byte, use that numeric value.\n        val = code\n      }\n    }\n  } else if (typeof val === 'number') {\n    val = val & 255\n  } else if (typeof val === 'boolean') {\n    val = Number(val)\n  }\n\n  // Invalid ranges are not set to a default, so can range check early.\n  if (start < 0 || this.length < start || this.length < end) {\n    throw new RangeError('Out of range index')\n  }\n\n  if (end <= start) {\n    return this\n  }\n\n  start = start >>> 0\n  end = end === undefined ? this.length : end >>> 0\n\n  if (!val) val = 0\n\n  let i\n  if (typeof val === 'number') {\n    for (i = start; i < end; ++i) {\n      this[i] = val\n    }\n  } else {\n    const bytes = Buffer.isBuffer(val)\n      ? val\n      : Buffer.from(val, encoding)\n    const len = bytes.length\n    if (len === 0) {\n      throw new TypeError('The value \"' + val +\n        '\" is invalid for argument \"value\"')\n    }\n    for (i = 0; i < end - start; ++i) {\n      this[i + start] = bytes[i % len]\n    }\n  }\n\n  return this\n}\n\n// CUSTOM ERRORS\n// =============\n\n// Simplified versions from Node, changed for Buffer-only usage\nconst errors = {}\nfunction E (sym, getMessage, Base) {\n  errors[sym] = class NodeError extends Base {\n    constructor () {\n      super()\n\n      Object.defineProperty(this, 'message', {\n        value: getMessage.apply(this, arguments),\n        writable: true,\n        configurable: true\n      })\n\n      // Add the error code to the name to include it in the stack trace.\n      this.name = `${this.name} [${sym}]`\n      // Access the stack to generate the error message including the error code\n      // from the name.\n      this.stack // eslint-disable-line no-unused-expressions\n      // Reset the name to the actual name.\n      delete this.name\n    }\n\n    get code () {\n      return sym\n    }\n\n    set code (value) {\n      Object.defineProperty(this, 'code', {\n        configurable: true,\n        enumerable: true,\n        value,\n        writable: true\n      })\n    }\n\n    toString () {\n      return `${this.name} [${sym}]: ${this.message}`\n    }\n  }\n}\n\nE('ERR_BUFFER_OUT_OF_BOUNDS',\n  function (name) {\n    if (name) {\n      return `${name} is outside of buffer bounds`\n    }\n\n    return 'Attempt to access memory outside buffer bounds'\n  }, RangeError)\nE('ERR_INVALID_ARG_TYPE',\n  function (name, actual) {\n    return `The \"${name}\" argument must be of type number. Received type ${typeof actual}`\n  }, TypeError)\nE('ERR_OUT_OF_RANGE',\n  function (str, range, input) {\n    let msg = `The value of \"${str}\" is out of range.`\n    let received = input\n    if (Number.isInteger(input) && Math.abs(input) > 2 ** 32) {\n      received = addNumericalSeparator(String(input))\n    } else if (typeof input === 'bigint') {\n      received = String(input)\n      if (input > BigInt(2) ** BigInt(32) || input < -(BigInt(2) ** BigInt(32))) {\n        received = addNumericalSeparator(received)\n      }\n      received += 'n'\n    }\n    msg += ` It must be ${range}. Received ${received}`\n    return msg\n  }, RangeError)\n\nfunction addNumericalSeparator (val) {\n  let res = ''\n  let i = val.length\n  const start = val[0] === '-' ? 1 : 0\n  for (; i >= start + 4; i -= 3) {\n    res = `_${val.slice(i - 3, i)}${res}`\n  }\n  return `${val.slice(0, i)}${res}`\n}\n\n// CHECK FUNCTIONS\n// ===============\n\nfunction checkBounds (buf, offset, byteLength) {\n  validateNumber(offset, 'offset')\n  if (buf[offset] === undefined || buf[offset + byteLength] === undefined) {\n    boundsError(offset, buf.length - (byteLength + 1))\n  }\n}\n\nfunction checkIntBI (value, min, max, buf, offset, byteLength) {\n  if (value > max || value < min) {\n    const n = typeof min === 'bigint' ? 'n' : ''\n    let range\n    if (byteLength > 3) {\n      if (min === 0 || min === BigInt(0)) {\n        range = `>= 0${n} and < 2${n} ** ${(byteLength + 1) * 8}${n}`\n      } else {\n        range = `>= -(2${n} ** ${(byteLength + 1) * 8 - 1}${n}) and < 2 ** ` +\n                `${(byteLength + 1) * 8 - 1}${n}`\n      }\n    } else {\n      range = `>= ${min}${n} and <= ${max}${n}`\n    }\n    throw new errors.ERR_OUT_OF_RANGE('value', range, value)\n  }\n  checkBounds(buf, offset, byteLength)\n}\n\nfunction validateNumber (value, name) {\n  if (typeof value !== 'number') {\n    throw new errors.ERR_INVALID_ARG_TYPE(name, 'number', value)\n  }\n}\n\nfunction boundsError (value, length, type) {\n  if (Math.floor(value) !== value) {\n    validateNumber(value, type)\n    throw new errors.ERR_OUT_OF_RANGE(type || 'offset', 'an integer', value)\n  }\n\n  if (length < 0) {\n    throw new errors.ERR_BUFFER_OUT_OF_BOUNDS()\n  }\n\n  throw new errors.ERR_OUT_OF_RANGE(type || 'offset',\n                                    `>= ${type ? 1 : 0} and <= ${length}`,\n                                    value)\n}\n\n// HELPER FUNCTIONS\n// ================\n\nconst INVALID_BASE64_RE = /[^+/0-9A-Za-z-_]/g\n\nfunction base64clean (str) {\n  // Node takes equal signs as end of the Base64 encoding\n  str = str.split('=')[0]\n  // Node strips out invalid characters like \\n and \\t from the string, base64-js does not\n  str = str.trim().replace(INVALID_BASE64_RE, '')\n  // Node converts strings with length < 2 to ''\n  if (str.length < 2) return ''\n  // Node allows for non-padded base64 strings (missing trailing ===), base64-js does not\n  while (str.length % 4 !== 0) {\n    str = str + '='\n  }\n  return str\n}\n\nfunction utf8ToBytes (string, units) {\n  units = units || Infinity\n  let codePoint\n  const length = string.length\n  let leadSurrogate = null\n  const bytes = []\n\n  for (let i = 0; i < length; ++i) {\n    codePoint = string.charCodeAt(i)\n\n    // is surrogate component\n    if (codePoint > 0xD7FF && codePoint < 0xE000) {\n      // last char was a lead\n      if (!leadSurrogate) {\n        // no lead yet\n        if (codePoint > 0xDBFF) {\n          // unexpected trail\n          if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD)\n          continue\n        } else if (i + 1 === length) {\n          // unpaired lead\n          if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD)\n          continue\n        }\n\n        // valid lead\n        leadSurrogate = codePoint\n\n        continue\n      }\n\n      // 2 leads in a row\n      if (codePoint < 0xDC00) {\n        if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD)\n        leadSurrogate = codePoint\n        continue\n      }\n\n      // valid surrogate pair\n      codePoint = (leadSurrogate - 0xD800 << 10 | codePoint - 0xDC00) + 0x10000\n    } else if (leadSurrogate) {\n      // valid bmp char, but last char was a lead\n      if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD)\n    }\n\n    leadSurrogate = null\n\n    // encode utf8\n    if (codePoint < 0x80) {\n      if ((units -= 1) < 0) break\n      bytes.push(codePoint)\n    } else if (codePoint < 0x800) {\n      if ((units -= 2) < 0) break\n      bytes.push(\n        codePoint >> 0x6 | 0xC0,\n        codePoint & 0x3F | 0x80\n      )\n    } else if (codePoint < 0x10000) {\n      if ((units -= 3) < 0) break\n      bytes.push(\n        codePoint >> 0xC | 0xE0,\n        codePoint >> 0x6 & 0x3F | 0x80,\n        codePoint & 0x3F | 0x80\n      )\n    } else if (codePoint < 0x110000) {\n      if ((units -= 4) < 0) break\n      bytes.push(\n        codePoint >> 0x12 | 0xF0,\n        codePoint >> 0xC & 0x3F | 0x80,\n        codePoint >> 0x6 & 0x3F | 0x80,\n        codePoint & 0x3F | 0x80\n      )\n    } else {\n      throw new Error('Invalid code point')\n    }\n  }\n\n  return bytes\n}\n\nfunction asciiToBytes (str) {\n  const byteArray = []\n  for (let i = 0; i < str.length; ++i) {\n    // Node's code seems to be doing this and not & 0x7F..\n    byteArray.push(str.charCodeAt(i) & 0xFF)\n  }\n  return byteArray\n}\n\nfunction utf16leToBytes (str, units) {\n  let c, hi, lo\n  const byteArray = []\n  for (let i = 0; i < str.length; ++i) {\n    if ((units -= 2) < 0) break\n\n    c = str.charCodeAt(i)\n    hi = c >> 8\n    lo = c % 256\n    byteArray.push(lo)\n    byteArray.push(hi)\n  }\n\n  return byteArray\n}\n\nfunction base64ToBytes (str) {\n  return base64.toByteArray(base64clean(str))\n}\n\nfunction blitBuffer (src, dst, offset, length) {\n  let i\n  for (i = 0; i < length; ++i) {\n    if ((i + offset >= dst.length) || (i >= src.length)) break\n    dst[i + offset] = src[i]\n  }\n  return i\n}\n\n// ArrayBuffer or Uint8Array objects from other contexts (i.e. iframes) do not pass\n// the `instanceof` check but they should be treated as of that type.\n// See: https://github.com/feross/buffer/issues/166\nfunction isInstance (obj, type) {\n  return obj instanceof type ||\n    (obj != null && obj.constructor != null && obj.constructor.name != null &&\n      obj.constructor.name === type.name)\n}\nfunction numberIsNaN (obj) {\n  // For IE11 support\n  return obj !== obj // eslint-disable-line no-self-compare\n}\n\n// Create lookup table for `toString('hex')`\n// See: https://github.com/feross/buffer/issues/219\nconst hexSliceLookupTable = (function () {\n  const alphabet = '0123456789abcdef'\n  const table = new Array(256)\n  for (let i = 0; i < 16; ++i) {\n    const i16 = i * 16\n    for (let j = 0; j < 16; ++j) {\n      table[i16 + j] = alphabet[i] + alphabet[j]\n    }\n  }\n  return table\n})()\n\n// Return not function with Error if BigInt not supported\nfunction defineBigIntMethod (fn) {\n  return typeof BigInt === 'undefined' ? BufferBigIntNotDefined : fn\n}\n\nfunction BufferBigIntNotDefined () {\n  throw new Error('BigInt not supported')\n}\n","module.exports      = isTypedArray\nisTypedArray.strict = isStrictTypedArray\nisTypedArray.loose  = isLooseTypedArray\n\nvar toString = Object.prototype.toString\nvar names = {\n    '[object Int8Array]': true\n  , '[object Int16Array]': true\n  , '[object Int32Array]': true\n  , '[object Uint8Array]': true\n  , '[object Uint8ClampedArray]': true\n  , '[object Uint16Array]': true\n  , '[object Uint32Array]': true\n  , '[object Float32Array]': true\n  , '[object Float64Array]': true\n}\n\nfunction isTypedArray(arr) {\n  return (\n       isStrictTypedArray(arr)\n    || isLooseTypedArray(arr)\n  )\n}\n\nfunction isStrictTypedArray(arr) {\n  return (\n       arr instanceof Int8Array\n    || arr instanceof Int16Array\n    || arr instanceof Int32Array\n    || arr instanceof Uint8Array\n    || arr instanceof Uint8ClampedArray\n    || arr instanceof Uint16Array\n    || arr instanceof Uint32Array\n    || arr instanceof Float32Array\n    || arr instanceof Float64Array\n  )\n}\n\nfunction isLooseTypedArray(arr) {\n  return names[toString.call(arr)]\n}\n","'use strict';\nconst strictUriEncode = require('strict-uri-encode');\nconst decodeComponent = require('decode-uri-component');\nconst splitOnFirst = require('split-on-first');\n\nconst isNullOrUndefined = value => value === null || value === undefined;\n\nfunction encoderForArrayFormat(options) {\n\tswitch (options.arrayFormat) {\n\t\tcase 'index':\n\t\t\treturn key => (result, value) => {\n\t\t\t\tconst index = result.length;\n\n\t\t\t\tif (\n\t\t\t\t\tvalue === undefined ||\n\t\t\t\t\t(options.skipNull && value === null) ||\n\t\t\t\t\t(options.skipEmptyString && value === '')\n\t\t\t\t) {\n\t\t\t\t\treturn result;\n\t\t\t\t}\n\n\t\t\t\tif (value === null) {\n\t\t\t\t\treturn [...result, [encode(key, options), '[', index, ']'].join('')];\n\t\t\t\t}\n\n\t\t\t\treturn [\n\t\t\t\t\t...result,\n\t\t\t\t\t[encode(key, options), '[', encode(index, options), ']=', encode(value, options)].join('')\n\t\t\t\t];\n\t\t\t};\n\n\t\tcase 'bracket':\n\t\t\treturn key => (result, value) => {\n\t\t\t\tif (\n\t\t\t\t\tvalue === undefined ||\n\t\t\t\t\t(options.skipNull && value === null) ||\n\t\t\t\t\t(options.skipEmptyString && value === '')\n\t\t\t\t) {\n\t\t\t\t\treturn result;\n\t\t\t\t}\n\n\t\t\t\tif (value === null) {\n\t\t\t\t\treturn [...result, [encode(key, options), '[]'].join('')];\n\t\t\t\t}\n\n\t\t\t\treturn [...result, [encode(key, options), '[]=', encode(value, options)].join('')];\n\t\t\t};\n\n\t\tcase 'comma':\n\t\tcase 'separator':\n\t\t\treturn key => (result, value) => {\n\t\t\t\tif (value === null || value === undefined || value.length === 0) {\n\t\t\t\t\treturn result;\n\t\t\t\t}\n\n\t\t\t\tif (result.length === 0) {\n\t\t\t\t\treturn [[encode(key, options), '=', encode(value, options)].join('')];\n\t\t\t\t}\n\n\t\t\t\treturn [[result, encode(value, options)].join(options.arrayFormatSeparator)];\n\t\t\t};\n\n\t\tdefault:\n\t\t\treturn key => (result, value) => {\n\t\t\t\tif (\n\t\t\t\t\tvalue === undefined ||\n\t\t\t\t\t(options.skipNull && value === null) ||\n\t\t\t\t\t(options.skipEmptyString && value === '')\n\t\t\t\t) {\n\t\t\t\t\treturn result;\n\t\t\t\t}\n\n\t\t\t\tif (value === null) {\n\t\t\t\t\treturn [...result, encode(key, options)];\n\t\t\t\t}\n\n\t\t\t\treturn [...result, [encode(key, options), '=', encode(value, options)].join('')];\n\t\t\t};\n\t}\n}\n\nfunction parserForArrayFormat(options) {\n\tlet result;\n\n\tswitch (options.arrayFormat) {\n\t\tcase 'index':\n\t\t\treturn (key, value, accumulator) => {\n\t\t\t\tresult = /\\[(\\d*)\\]$/.exec(key);\n\n\t\t\t\tkey = key.replace(/\\[\\d*\\]$/, '');\n\n\t\t\t\tif (!result) {\n\t\t\t\t\taccumulator[key] = value;\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tif (accumulator[key] === undefined) {\n\t\t\t\t\taccumulator[key] = {};\n\t\t\t\t}\n\n\t\t\t\taccumulator[key][result[1]] = value;\n\t\t\t};\n\n\t\tcase 'bracket':\n\t\t\treturn (key, value, accumulator) => {\n\t\t\t\tresult = /(\\[\\])$/.exec(key);\n\t\t\t\tkey = key.replace(/\\[\\]$/, '');\n\n\t\t\t\tif (!result) {\n\t\t\t\t\taccumulator[key] = value;\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tif (accumulator[key] === undefined) {\n\t\t\t\t\taccumulator[key] = [value];\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\taccumulator[key] = [].concat(accumulator[key], value);\n\t\t\t};\n\n\t\tcase 'comma':\n\t\tcase 'separator':\n\t\t\treturn (key, value, accumulator) => {\n\t\t\t\tconst isArray = typeof value === 'string' && value.split('').indexOf(options.arrayFormatSeparator) > -1;\n\t\t\t\tconst newValue = isArray ? value.split(options.arrayFormatSeparator).map(item => decode(item, options)) : value === null ? value : decode(value, options);\n\t\t\t\taccumulator[key] = newValue;\n\t\t\t};\n\n\t\tdefault:\n\t\t\treturn (key, value, accumulator) => {\n\t\t\t\tif (accumulator[key] === undefined) {\n\t\t\t\t\taccumulator[key] = value;\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\taccumulator[key] = [].concat(accumulator[key], value);\n\t\t\t};\n\t}\n}\n\nfunction validateArrayFormatSeparator(value) {\n\tif (typeof value !== 'string' || value.length !== 1) {\n\t\tthrow new TypeError('arrayFormatSeparator must be single character string');\n\t}\n}\n\nfunction encode(value, options) {\n\tif (options.encode) {\n\t\treturn options.strict ? strictUriEncode(value) : encodeURIComponent(value);\n\t}\n\n\treturn value;\n}\n\nfunction decode(value, options) {\n\tif (options.decode) {\n\t\treturn decodeComponent(value);\n\t}\n\n\treturn value;\n}\n\nfunction keysSorter(input) {\n\tif (Array.isArray(input)) {\n\t\treturn input.sort();\n\t}\n\n\tif (typeof input === 'object') {\n\t\treturn keysSorter(Object.keys(input))\n\t\t\t.sort((a, b) => Number(a) - Number(b))\n\t\t\t.map(key => input[key]);\n\t}\n\n\treturn input;\n}\n\nfunction removeHash(input) {\n\tconst hashStart = input.indexOf('#');\n\tif (hashStart !== -1) {\n\t\tinput = input.slice(0, hashStart);\n\t}\n\n\treturn input;\n}\n\nfunction getHash(url) {\n\tlet hash = '';\n\tconst hashStart = url.indexOf('#');\n\tif (hashStart !== -1) {\n\t\thash = url.slice(hashStart);\n\t}\n\n\treturn hash;\n}\n\nfunction extract(input) {\n\tinput = removeHash(input);\n\tconst queryStart = input.indexOf('?');\n\tif (queryStart === -1) {\n\t\treturn '';\n\t}\n\n\treturn input.slice(queryStart + 1);\n}\n\nfunction parseValue(value, options) {\n\tif (options.parseNumbers && !Number.isNaN(Number(value)) && (typeof value === 'string' && value.trim() !== '')) {\n\t\tvalue = Number(value);\n\t} else if (options.parseBooleans && value !== null && (value.toLowerCase() === 'true' || value.toLowerCase() === 'false')) {\n\t\tvalue = value.toLowerCase() === 'true';\n\t}\n\n\treturn value;\n}\n\nfunction parse(input, options) {\n\toptions = Object.assign({\n\t\tdecode: true,\n\t\tsort: true,\n\t\tarrayFormat: 'none',\n\t\tarrayFormatSeparator: ',',\n\t\tparseNumbers: false,\n\t\tparseBooleans: false\n\t}, options);\n\n\tvalidateArrayFormatSeparator(options.arrayFormatSeparator);\n\n\tconst formatter = parserForArrayFormat(options);\n\n\t// Create an object with no prototype\n\tconst ret = Object.create(null);\n\n\tif (typeof input !== 'string') {\n\t\treturn ret;\n\t}\n\n\tinput = input.trim().replace(/^[?#&]/, '');\n\n\tif (!input) {\n\t\treturn ret;\n\t}\n\n\tfor (const param of input.split('&')) {\n\t\tlet [key, value] = splitOnFirst(options.decode ? param.replace(/\\+/g, ' ') : param, '=');\n\n\t\t// Missing `=` should be `null`:\n\t\t// http://w3.org/TR/2012/WD-url-20120524/#collect-url-parameters\n\t\tvalue = value === undefined ? null : ['comma', 'separator'].includes(options.arrayFormat) ? value : decode(value, options);\n\t\tformatter(decode(key, options), value, ret);\n\t}\n\n\tfor (const key of Object.keys(ret)) {\n\t\tconst value = ret[key];\n\t\tif (typeof value === 'object' && value !== null) {\n\t\t\tfor (const k of Object.keys(value)) {\n\t\t\t\tvalue[k] = parseValue(value[k], options);\n\t\t\t}\n\t\t} else {\n\t\t\tret[key] = parseValue(value, options);\n\t\t}\n\t}\n\n\tif (options.sort === false) {\n\t\treturn ret;\n\t}\n\n\treturn (options.sort === true ? Object.keys(ret).sort() : Object.keys(ret).sort(options.sort)).reduce((result, key) => {\n\t\tconst value = ret[key];\n\t\tif (Boolean(value) && typeof value === 'object' && !Array.isArray(value)) {\n\t\t\t// Sort object keys, not values\n\t\t\tresult[key] = keysSorter(value);\n\t\t} else {\n\t\t\tresult[key] = value;\n\t\t}\n\n\t\treturn result;\n\t}, Object.create(null));\n}\n\nexports.extract = extract;\nexports.parse = parse;\n\nexports.stringify = (object, options) => {\n\tif (!object) {\n\t\treturn '';\n\t}\n\n\toptions = Object.assign({\n\t\tencode: true,\n\t\tstrict: true,\n\t\tarrayFormat: 'none',\n\t\tarrayFormatSeparator: ','\n\t}, options);\n\n\tvalidateArrayFormatSeparator(options.arrayFormatSeparator);\n\n\tconst shouldFilter = key => (\n\t\t(options.skipNull && isNullOrUndefined(object[key])) ||\n\t\t(options.skipEmptyString && object[key] === '')\n\t);\n\n\tconst formatter = encoderForArrayFormat(options);\n\n\tconst objectCopy = {};\n\n\tfor (const key of Object.keys(object)) {\n\t\tif (!shouldFilter(key)) {\n\t\t\tobjectCopy[key] = object[key];\n\t\t}\n\t}\n\n\tconst keys = Object.keys(objectCopy);\n\n\tif (options.sort !== false) {\n\t\tkeys.sort(options.sort);\n\t}\n\n\treturn keys.map(key => {\n\t\tconst value = object[key];\n\n\t\tif (value === undefined) {\n\t\t\treturn '';\n\t\t}\n\n\t\tif (value === null) {\n\t\t\treturn encode(key, options);\n\t\t}\n\n\t\tif (Array.isArray(value)) {\n\t\t\treturn value\n\t\t\t\t.reduce(formatter(key), [])\n\t\t\t\t.join('&');\n\t\t}\n\n\t\treturn encode(key, options) + '=' + encode(value, options);\n\t}).filter(x => x.length > 0).join('&');\n};\n\nexports.parseUrl = (input, options) => {\n\toptions = Object.assign({\n\t\tdecode: true\n\t}, options);\n\n\tconst [url, hash] = splitOnFirst(input, '#');\n\n\treturn Object.assign(\n\t\t{\n\t\t\turl: url.split('?')[0] || '',\n\t\t\tquery: parse(extract(input), options)\n\t\t},\n\t\toptions && options.parseFragmentIdentifier && hash ? {fragmentIdentifier: decode(hash, options)} : {}\n\t);\n};\n\nexports.stringifyUrl = (input, options) => {\n\toptions = Object.assign({\n\t\tencode: true,\n\t\tstrict: true\n\t}, options);\n\n\tconst url = removeHash(input.url).split('?')[0] || '';\n\tconst queryFromUrl = exports.extract(input.url);\n\tconst parsedQueryFromUrl = exports.parse(queryFromUrl, {sort: false});\n\n\tconst query = Object.assign(parsedQueryFromUrl, input.query);\n\tlet queryString = exports.stringify(query, options);\n\tif (queryString) {\n\t\tqueryString = `?${queryString}`;\n\t}\n\n\tlet hash = getHash(input.url);\n\tif (input.fragmentIdentifier) {\n\t\thash = `#${encode(input.fragmentIdentifier, options)}`;\n\t}\n\n\treturn `${url}${queryString}${hash}`;\n};\n","/**\n * Convert a typed array to a Buffer without a copy\n *\n * Author:   Feross Aboukhadijeh <https://feross.org>\n * License:  MIT\n *\n * `npm install typedarray-to-buffer`\n */\n\nvar isTypedArray = require('is-typedarray').strict\n\nmodule.exports = function typedarrayToBuffer (arr) {\n  if (isTypedArray(arr)) {\n    // To avoid a copy, use the typed array's underlying ArrayBuffer to back new Buffer\n    var buf = Buffer.from(arr.buffer)\n    if (arr.byteLength !== arr.buffer.byteLength) {\n      // Respect the \"view\", i.e. byteOffset and byteLength, without doing a copy\n      buf = buf.slice(arr.byteOffset, arr.byteOffset + arr.byteLength)\n    }\n    return buf\n  } else {\n    // Pass through all other types to `Buffer.from`\n    return Buffer.from(arr)\n  }\n}\n"],"names":["reservedEvents","signingMethods","ENC_HEX","ENC_UTF8","STRING_ZERO","bufferToArray","buf","Uint8Array","bufferToHex","prefixed","hex","toString","addHexPrefix","bufferToUtf8","arrayToBuffer","arr","arrayToHex","arrayToUtf8","hexToBuffer","Buffer","from","removeHexPrefix","hexToArray","utf8ToBuffer","utf8","utf8ToArray","isHexString","str","length","match","concatArrays","args","result","forEach","arg","concat","Array","sanitizeBytes","byteSize","padding","padString","padLeft","remainder","calcByteLength","replace","startsWith","sanitizeHex","left","diff","pad","repeat","convertArrayBufferToBuffer","arrBuf","convertUtf8ToHex","noPrefix","convertNumberToHex","num","substring","payloadId","uuid","a","b","Math","random","value","isJsonRpcResponseSuccess","object","isJsonRpcResponseError","error","isInternalEvent","event","toChecksumAddress","address","toLowerCase","hash","keccak_256","checksum","i","parseInt","toUpperCase","parsePersonalSign","params","array","parseTransactionData","txData","type","test","Error","parseHexValues","trim","isEmptyString","txDataRPC","to","undefined","gasPrice","gas","gasLimit","nonce","data","prunable","Object","keys","key","includes","appendToQueryString","queryString","newQueryParams","queryParams","parseQueryString","assign","formatQueryString","constructor","this","_eventEmitters","window","addEventListener","trigger","on","callback","push","eventEmitters","filter","eventEmitter","WS","g","WebSocket","opts","_queue","_events","_subscriptions","_protocol","protocol","_version","version","_url","_netMonitor","_socket","_nextSocket","subscriptions","netMonitor","url","_socketCreate","readyState","connecting","connected","closing","closed","open","close","_socketClose","send","message","topic","silent","_socketSend","payload","subscribe","_a","_b","splitUrl","split","isBrowser","env","host","getLocation","detectEnv","name","pathEnd","indexOf","substr","getQueryString","getWebSocketUrl","onmessage","_socketReceive","onopen","_socketOpen","onerror","_socketError","onclose","setTimeout","_queueSubscriptions","_pushQueue","socketMessage","JSON","stringify","_setToQueue","async","parse","events","e","ERROR_SESSION_CONNECTED","ERROR_SESSION_DISCONNECTED","ERROR_INVALID_RESPONSE","ERROR_QRCODE_MODAL_USER_CLOSED","unsubscribe","x","method","id","isReservedEvent","storageId","getSession","session","json","getLocal","bridge","setSession","setLocal","removeSession","removeLocal","domain","bridges","map","char","selectRandomBridgeUrl","floor","getBridgeUrl","hostname","extractHostname","slice","join","extractRootDomain","shouldSelectRandomly","_bridge","_key","_clientId","_clientMeta","_peerId","_peerMeta","_handshakeId","_handshakeTopic","_connected","_accounts","_chainId","_networkId","_rpcUrl","_eventManager","getClientMeta","connectorOpts","clientMeta","_cryptoLib","cryptoLib","_sessionStorage","sessionStorage","_qrcodeModal","qrcodeModal","_qrcodeModalOptions","qrcodeModalOptions","_signingMethods","uri","_getStorageSession","handshakeId","_subscribeToSessionResponse","_transport","transport","clientId","_subscribeToInternalEvents","_initTransport","_subscribeToSessionRequest","pushServerOpts","_registerPushServer","buffer","peerId","peerMeta","handshakeTopic","_formatUri","_parseUri","chainId","networkId","accounts","rpcUrl","pending","off","instantRequest","_generateKey","request","_formatRequest","endInstantRequest","killSession","_sendCallRequest","createSession","Promise","resolve","reject","_sendSessionRequest","approveSession","sessionStatus","sessionParams","approved","response","jsonrpc","_sendResponse","_setStorageSession","rejectSession","sessionError","_formatResponse","_removeStorageSession","updateSession","_manageStorageSession","_sendRequest","_handleSessionDisconnect","tx","parsedTx","chainParams","unsafeSend","options","_subscribeToResponse","formattedRequest","approveRequest","formattedResponse","rejectRequest","transportClose","callRequest","encryptionPayload","_encrypt","forcePushNotification","isSilentPayload","errorMsg","_subscribeToCallResponse","baseResponse","code","formatRpcError","mobileLinkChoiceKey","_handleSessionResponse","_decrypt","isMobile","mobileLinkUrl","location","href","internalPayload","_handleIncomingMessages","encodeURIComponent","pathStart","requiredParams","path","values","parseRequiredParams","parseQueryParams","parseWalletConnectUri","decodeURIComponent","generateKey","encrypt","decrypt","token","pushSubscription","peerName","language","fetch","headers","Accept","body","success","AES_LENGTH","HMAC_LENGTH","HMAC_BROWSER_ALGO","ENCRYPT_OP","DECRYPT_OP","SIGN_OP","VERIFY_OP","browserImportKey","importKey","getAlgo","getOps","aesCbcEncrypt","iv","subtle","cryptoKey","browserAesEncrypt","aesCbcDecrypt","browserAesDecrypt","hmacSha256Sign","msg","signature","sign","bytes","getRandomValues","verifyHmac","cipherText","hmacHex","hmac","unsigned","chmacHex","providedIv","ivHex","content","cipherTextHex","super","module","exports","base64","ieee754","customInspectSymbol","Symbol","K_MAX_LENGTH","createBuffer","RangeError","setPrototypeOf","prototype","encodingOrOffset","TypeError","allocUnsafe","string","encoding","isEncoding","byteLength","actual","write","fromString","ArrayBuffer","isView","arrayView","isInstance","copy","fromArrayBuffer","byteOffset","fromArrayLike","fromArrayView","SharedArrayBuffer","valueOf","obj","isBuffer","len","checked","numberIsNaN","isArray","fromObject","toPrimitive","assertSize","size","mustMatch","arguments","loweredCase","utf8ToBytes","base64ToBytes","slowToString","start","end","hexSlice","utf8Slice","asciiSlice","latin1Slice","base64Slice","utf16leSlice","swap","n","m","bidirectionalIndexOf","val","dir","arrayIndexOf","call","lastIndexOf","indexSize","arrLength","valLength","String","read","readUInt16BE","foundIndex","found","j","hexWrite","offset","Number","remaining","strLen","parsed","utf8Write","blitBuffer","asciiWrite","byteArray","charCodeAt","asciiToBytes","base64Write","ucs2Write","units","c","hi","lo","utf16leToBytes","fromByteArray","min","res","firstByte","codePoint","bytesPerSequence","secondByte","thirdByte","fourthByte","tempCodePoint","codePoints","MAX_ARGUMENTS_LENGTH","fromCharCode","apply","decodeCodePointsArray","TYPED_ARRAY_SUPPORT","proto","foo","typedArraySupport","console","defineProperty","enumerable","get","poolSize","alloc","fill","allocUnsafeSlow","_isBuffer","compare","y","list","pos","set","swap16","swap32","swap64","toLocaleString","equals","inspect","max","target","thisStart","thisEnd","thisCopy","targetCopy","isFinite","toJSON","_arr","ret","out","hexSliceLookupTable","checkOffset","ext","checkInt","wrtBigUInt64LE","checkIntBI","BigInt","wrtBigUInt64BE","checkIEEE754","writeFloat","littleEndian","noAssert","writeDouble","newBuf","subarray","readUintLE","readUIntLE","mul","readUintBE","readUIntBE","readUint8","readUInt8","readUint16LE","readUInt16LE","readUint16BE","readUint32LE","readUInt32LE","readUint32BE","readUInt32BE","readBigUInt64LE","defineBigIntMethod","validateNumber","first","last","boundsError","readBigUInt64BE","readIntLE","pow","readIntBE","readInt8","readInt16LE","readInt16BE","readInt32LE","readInt32BE","readBigInt64LE","readBigInt64BE","readFloatLE","readFloatBE","readDoubleLE","readDoubleBE","writeUintLE","writeUIntLE","writeUintBE","writeUIntBE","writeUint8","writeUInt8","writeUint16LE","writeUInt16LE","writeUint16BE","writeUInt16BE","writeUint32LE","writeUInt32LE","writeUint32BE","writeUInt32BE","writeBigUInt64LE","writeBigUInt64BE","writeIntLE","limit","sub","writeIntBE","writeInt8","writeInt16LE","writeInt16BE","writeInt32LE","writeInt32BE","writeBigInt64LE","writeBigInt64BE","writeFloatLE","writeFloatBE","writeDoubleLE","writeDoubleBE","targetStart","copyWithin","errors","E","sym","getMessage","Base","writable","configurable","stack","addNumericalSeparator","range","ERR_OUT_OF_RANGE","checkBounds","ERR_INVALID_ARG_TYPE","ERR_BUFFER_OUT_OF_BOUNDS","input","received","isInteger","abs","INVALID_BASE64_RE","Infinity","leadSurrogate","toByteArray","base64clean","src","dst","alphabet","table","i16","fn","BufferBigIntNotDefined","isTypedArray","strict","isStrictTypedArray","loose","isLooseTypedArray","names","Int8Array","Int16Array","Int32Array","Uint8ClampedArray","Uint16Array","Uint32Array","Float32Array","Float64Array","strictUriEncode","decodeComponent","splitOnFirst","validateArrayFormatSeparator","encode","decode","keysSorter","sort","removeHash","hashStart","extract","queryStart","parseValue","parseNumbers","isNaN","parseBooleans","arrayFormat","arrayFormatSeparator","formatter","accumulator","exec","newValue","item","parserForArrayFormat","create","param","k","reduce","Boolean","shouldFilter","skipNull","skipEmptyString","index","encoderForArrayFormat","objectCopy","parseUrl","query","parseFragmentIdentifier","fragmentIdentifier","stringifyUrl","queryFromUrl","parsedQueryFromUrl","getHash"],"sourceRoot":""}